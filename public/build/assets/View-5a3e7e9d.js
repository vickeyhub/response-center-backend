import{n as f}from"./no-img-df4ddc69.js";import{C as w,a as D,u as A}from"./appointment-a94c1285.js";import{_ as C,r as g,o as s,f as o,b as e,t as n,l as a,h as i,F as m,e as y,w as b,j as k}from"./app-1983373d.js";const v=new Date;let I=v.getDate(),B=v.getMonth()+1,N=v.getFullYear(),M=`${N}-${B}-${I}`;const F={components:{},data(){return{appointment:{},recordNotFound:!1,noImg:f,currentDate:M,pendingStatuses:[{type:"pending",text:"Confirmed",value:"Booked"},{type:"",text:"Cancel",value:"Cancelled"}],confirmedStatuses:[{type:"",text:"Cancel",value:"cancelled"},{text:"Fulfilled",value:"fulfilled"},{text:"Arrived",value:"arrived"}]}},methods:{noImage(l){l.target.src=f},getAppointment(){this.recordNotFound=!1;const l=this.$route.params.appointmentId;D(l).then(c=>{c.success===!0?this.appointment=c.data:this.recordNotFound=!0})},updateStatus(l,{resetForm:c}){if(this.statusErr=!1,this.updatedStatus=="")this.statusErr=!0;else{let r=new FormData;this.submittingForm=!0,r.append("appointment_id",this.appointment.id),r.append("cancellation_reason",null),r.append("status",this.updatedStatus),r.append("payment_mode",null),A(r).then(p=>{this.handleResponse(p),this.submittingForm=!1,p.success==!0&&(c(),this.closeModal(),this.getAppointment())}).catch(p=>{this.submittingForm=!1,this.handleCatch(p)})}},closeModal(){w.close()}},mounted(){this.getAppointment()}};w.bind("[data-fancybox]",{closeButton:!1,backdropClick:!1});const j={key:0,class:"row g-4"},P={class:"col-12"},Y={class:"blueBox"},E={class:"row align-items-center"},V={class:"col-12 col-md"},L={class:"aInfo"},R={class:"price"},U={key:0},T={class:"Astatus pending mt-3"},q={key:0},G={key:1},H={key:0,"data-fancybox":"","data-src":"#status-dialog-content",title:"Update Status",alt:"Update Status",class:"btn btn-sm btn-warning Astatus ms-2"},O={key:0,class:"col-12 col-md-auto pt-4 pt-lg-0"},z=e("h6",null,"Appointment with",-1),J={class:"cBox"},K={class:"row g-3"},Q={class:"col-auto"},W={class:"cImg"},X=["src"],Z=["src"],$={class:"col"},ee={class:"cInfo"},te=e("br",null,null,-1),ne={key:0,class:"col-12"},se={class:"greyBox"},oe={class:"row"},ie={class:"col-12 col-lg-6 d-flex"},le=e("h4",null,"Doctor's Details",-1),ae=e("span",null,"Name:",-1),ce=e("span",null,"Email:",-1),re=e("span",null,"Mobile No.:",-1),pe={class:"col-12 col-lg-6 d-flex"},_e=e("h4",null,"Clinic's Details",-1),de=e("span",null,"Name:",-1),ue=e("span",null,"Email:",-1),me=e("span",null,"Phone No.:",-1),he=e("span",null,"Address:",-1),ve={key:0},fe={key:1,class:"col-12"},ge=e("h4",null,"Reason",-1),ye={class:"col-12 col-lg-6 d-flex"},be={class:"greyBox"},ke=e("h4",null,"Personal Details",-1),we=e("span",null,"Name:",-1),xe=e("span",null,"Date of Birth:",-1),Se=e("span",null,"Email:",-1),De=e("span",null,"Mobile No.:",-1),Ae={key:0},Ce=e("span",null,"Alternate Phone:",-1),Ie={class:"col-12 col-lg-6 d-flex"},Be={class:"greyBox"},Ne=e("h4",null,"Payment Info",-1),Me=e("span",null,"Payment Mode:",-1),Fe={key:0},je=e("span",null,"Insurance:",-1),Pe={key:1},Ye=e("span",null,"Insurance Plan:",-1),Ee={key:2},Ve=e("span",null,"Member ID/EAP Auth:",-1),Le={key:3},Re=e("span",null,"Policy Holder's Gender:",-1),Ue={key:4},Te=e("span",null,"Service:",-1),qe={key:5},Ge=e("span",null,"Relation to Patient:",-1),He={key:1,class:"col-12 px-4"},Oe=e("h6",null,"Reason for Cancelling Appointment:",-1),ze={class:"col-12 col-lg-6 d-flex"},Je={class:"greyBox"},Ke=e("h4",null,"Insurance Image (Front-Side)",-1),Qe=["src"],We={class:"col-12 col-lg-6 d-flex"},Xe={class:"greyBox"},Ze=e("h4",null,"Insurance Image (Back-Side)",-1),$e=["src"],et={class:"col-12 col-lg-6 d-flex"},tt={class:"greyBox"},nt=e("h4",null,"Driver's License ID (Front-Side)",-1),st=["src"],ot={class:"col-12 col-lg-6 d-flex"},it={class:"greyBox"},lt=e("h4",null,"Driver's License ID (Back-Side)",-1),at=["src"],ct={key:1,class:"row g-4"},rt={id:"status-dialog-content",class:"popup"},pt=e("h2",null,"Update Status",-1),_t=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",tabindex:"-1"},[e("path",{d:"M20 20L4 4m16 0L4 20"})],-1),dt=[_t],ut={class:"row"},mt={class:"col-12"},ht={class:"form-field"},vt=e("label",{for:""},[i("Select Status"),e("span",null,"*")],-1),ft=e("option",{value:""},"Select Status",-1),gt=["value"],yt=["value"],bt={key:0,class:"error invalid-feedback"},kt=e("p",{class:"invalid-feedback"}," This field is required. ",-1),wt=[kt],xt={class:"col-sm-auto"},St={class:"submit-wrap"},Dt={type:"submit",class:"btn btn-primary-light btn-medium min-small"},At={key:0,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{margin:"0 10px"},width:"24px",height:"24px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},Ct=e("circle",{cx:"50",cy:"50",r:"32","stroke-width":"8",stroke:"#3A89C9","stroke-dasharray":"50.26548245743669 50.26548245743669",fill:"none","stroke-linecap":"round"},[e("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0 50 50;360 50 50"})],-1),It=[Ct];function Bt(l,c,r,p,t,u){const x=g("vee-field"),S=g("vee-form");return s(),o(m,null,[Object.keys(t.appointment).length!==0&&!t.recordNotFound?(s(),o("div",j,[e("div",P,[e("div",Y,[e("div",E,[e("div",V,[e("div",L,[e("h4",null,n(l.$dayjs(t.appointment.date).format("MMM DD, YYYY"))+" @ "+n(t.appointment.time),1),e("h4",R,[t.appointment.payment_mode!="Insurance"?(s(),o("span",U,"Self-pay")):a("",!0),i(" Charge: $"+n(t.appointment.clinician.charges_per_session),1)]),e("div",T,[i(" Status: "),t.appointment.status=="Booked"?(s(),o("span",q,"Confirmed")):(s(),o("span",G,n(t.appointment.status),1))]),l.$dayjs(t.appointment.date).isSame(l.$dayjs(t.currentDate))||l.$dayjs(t.appointment.date).isAfter(l.$dayjs(t.currentDate))?(s(),o("button",H," Change Status ")):a("",!0)])]),t.appointment.clinician?(s(),o("div",O,[z,e("div",J,[e("div",K,[e("div",Q,[e("div",W,[t.appointment.clinician.image?(s(),o("img",{key:0,src:`${t.appointment.clinician.image}`,onError:c[0]||(c[0]=(..._)=>u.noImage&&u.noImage(..._))},null,40,X)):(s(),o("img",{key:1,src:t.noImg},null,8,Z))])]),e("div",$,[e("h3",null,[i(n(t.appointment.clinician.name)+" ",1),e("span",null,n(t.appointment.clinician.qualification),1)]),e("div",ee,[i(n(t.appointment.clinician.email),1),te,i(" "+n(t.appointment.clinician.phone_no),1)])])])])])):a("",!0)])])]),t.appointment.referral?(s(),o("div",ne,[e("div",se,[e("div",oe,[e("div",ie,[e("div",null,[le,e("ul",null,[e("li",null,[ae,i(" "+n(t.appointment.referral.dr_name),1)]),e("li",null,[ce,i(" "+n(t.appointment.referral.dr_email),1)]),e("li",null,[re,i(" "+n(t.appointment.referral.dr_mobile_number),1)])])])]),e("div",pe,[e("div",null,[_e,e("ul",null,[e("li",null,[de,i(" "+n(t.appointment.referral.clinic_name),1)]),e("li",null,[ue,i(" "+n(t.appointment.referral.clinic_email),1)]),e("li",null,[me,i(" "+n(t.appointment.referral.clinic_mobile_number),1)]),e("li",null,[he,i(" "+n(t.appointment.referral.clinic_address),1)])])])]),t.appointment.referral.reason?(s(),o("hr",ve)):a("",!0),t.appointment.referral.reason?(s(),o("div",fe,[e("div",null,[ge,i(" "+n(t.appointment.referral.reason),1)])])):a("",!0)])])])):a("",!0),e("div",ye,[e("div",be,[ke,e("ul",null,[e("li",null,[we,i(" "+n(t.appointment.first_name)+" "+n(t.appointment.last_name),1)]),e("li",null,[xe,i(" "+n(l.$dayjs(t.appointment.dob).format("MMM DD, YYYY")),1)]),e("li",null,[Se,i(" "+n(t.appointment.email),1)]),e("li",null,[De,i(" "+n(t.appointment.home_phone),1)]),t.appointment.mobile_number?(s(),o("li",Ae,[Ce,i(" "+n(t.appointment.mobile_number),1)])):a("",!0)])])]),e("div",Ie,[e("div",Be,[Ne,e("ul",null,[e("li",null,[Me,i(" "+n(t.appointment.payment_mode),1)]),t.appointment.insurance_id?(s(),o("li",Fe,[je,i(" "+n(t.appointment.insurance?t.appointment.insurance.name:"N/A"),1)])):a("",!0),t.appointment.insurance_plan_id?(s(),o("li",Pe,[Ye,i(" "+n(t.appointment.plan?t.appointment.plan.planname:"N/A"),1)])):a("",!0),t.appointment.member_id?(s(),o("li",Ee,[Ve,i(" "+n(t.appointment.member_id),1)])):a("",!0),t.appointment.policy_holder_gender?(s(),o("li",Le,[Re,i(" "+n(t.appointment.policy_holder_gender),1)])):a("",!0),t.appointment.service_provided?(s(),o("li",Ue,[Te,i(" "+n(t.appointment.service_provided.name),1)])):a("",!0),t.appointment.relation_to_patient?(s(),o("li",qe,[Ge,i(" "+n(t.appointment.relation_to_patient),1)])):a("",!0)])])]),t.appointment.cancellation_reason&&t.appointment.cancellation_reason!="null"?(s(),o("div",He,[Oe,e("p",null,n(t.appointment.cancellation_reason),1)])):a("",!0),t.appointment.payment_mode=="Insurance"?(s(),o(m,{key:2},[e("div",ze,[e("div",Je,[Ke,e("img",{src:t.appointment.insurance_card_front,class:"w-100"},null,8,Qe)])]),e("div",We,[e("div",Xe,[Ze,e("img",{src:t.appointment.insurance_card_back,class:"w-100"},null,8,$e)])]),e("div",et,[e("div",tt,[nt,e("img",{src:t.appointment.driver_license_front,class:"w-100"},null,8,st)])]),e("div",ot,[e("div",it,[lt,e("img",{src:t.appointment.driver_license_back,class:"w-100"},null,8,at)])])],64)):a("",!0)])):(s(),o("div",ct,"No record found")),e("div",rt,[pt,e("button",{"data-fancybox-close":"",onClick:c[1]||(c[1]=_=>u.closeModal()),class:"f-button is-close-btn",title:"Close"},dt),y(S,{"validation-schema":l.schema,onSubmit:u.updateStatus,ref:"cancelForm"},{default:b(()=>[e("div",ut,[e("div",mt,[e("div",ht,[vt,y(x,{class:"form-control",name:"status",as:"select",modelValue:l.updatedStatus,"onUpdate:modelValue":c[2]||(c[2]=_=>l.updatedStatus=_)},{default:b(({field:_,errors:Nt})=>[ft,(s(!0),o(m,null,k(t.pendingStatuses,(d,h)=>(s(),o("option",{key:h,value:d.value},n(d.text),9,gt))),128)),t.appointment.status=="confirmed"||l.type=="referral"&&l.statusAppointment.status!="Cancelled"&&l.statusAppointment.status!="Pending"&&l.$dayjs(l.statusAppointment.date).isAfter(l.$dayjs(t.currentDate))?(s(!0),o(m,{key:0},k(t.confirmedStatuses,(d,h)=>(s(),o("option",{key:h,value:d.value},n(d.text),9,yt))),128)):a("",!0)]),_:1},8,["modelValue"]),l.statusErr?(s(),o("div",bt,wt)):a("",!0)])]),e("div",xt,[e("div",St,[e("button",Dt,[l.submittingForm?(s(),o("svg",At,It)):a("",!0),i(" Update ")])])])])]),_:1},8,["validation-schema","onSubmit"])])],64)}const Pt=C(F,[["render",Bt]]);export{Pt as V};
