import{q as m,_ as v,r,o as c,f as d,e as u,w as C,b as e,t as g,F as f,j as b,k as w,v as x,n as $,h as y,l as k}from"./app-1983373d.js";import{B as N}from"./Breadcrumb-0722ea03.js";import{L as P}from"./LeftSideHeader-ba42ca70.js";function R(t){return m({url:`/api/testing-types${t}`,method:"get"})}function B(t){return m({url:`/api/testing-types/${t}`,method:"get"})}function D(t){return m({url:`/api/testing-types/${t}`,method:"delete"})}function S(t){return m({url:"/api/remove-testing-types",method:"post",data:t})}function M(t){return m({url:"/api/testing-types",method:"post",data:t})}function T(t,s){return m({url:`/api/testing-types/${s}`,method:"put",data:t})}const L={name:"AddTestingType",props:{typeName:{type:String,default:""},id:{type:Number,default:0}},data(){return{showMsg:!1,msg:null,msgType:"success",name:this.typeName!=""?this.typeName:null,schema:{name:"required|min:3|max:50|regex:^([^0-9]*)$"},msgClass:"text-success"}},methods:{submit(t,{resetForm:s}){this.id>0?T({name:this.name},this.id).then(n=>{this.handleResponse(n),n.success==!0&&(this.name=" ",this.$emit("changePage",0))}).catch(n=>{this.handleCatch(n)}):M({name:this.name}).then(n=>{this.handleResponse(n),n.success==!0&&(s(),this.$emit("changePage",0))}).catch(n=>{this.handleCatch(n)})},displayMsg(t,s,n,h="text-success"){this.msg=t,this.showMsg=n,this.msgType=s,this.msgClass=h}}},A={class:"form-box mb-3"},V={class:"row"},E={class:"col col-xl-6"},I={class:"form-field"},O={class:"error invalid-feedback"},U={class:"col-sm-auto"},H={class:"submit-wrap"},j={type:"submit",class:"btn btn-primary-light btn-medium min-small"};function q(t,s,n,h,a,o){const p=r("vee-field"),i=r("ErrorMessage"),_=r("vee-form");return c(),d("div",A,[u(_,{"validation-schema":a.schema,onSubmit:o.submit},{default:C(()=>[e("div",V,[e("div",E,[e("div",I,[u(p,{name:"name",type:"text",modelValue:a.name,"onUpdate:modelValue":s[0]||(s[0]=l=>a.name=l),validateOnModelUpdate:!1,validateOnBlur:!1,validateOnChange:!1,validateOnInput:!1,validateOnMount:!1,class:"form-control",placeholder:"Enter Name"},null,8,["modelValue"]),e("div",O,[u(i,{class:"invalid-feedback",name:"name"})])])]),e("div",U,[e("div",H,[e("button",j,g(n.id==0?"Add":"Update"),1)])])])]),_:1},8,["validation-schema","onSubmit"])])}const F=v(L,[["render",q]]),G={props:{types:Array,totalCount:Number},data(){return{selectedTypes:[]}},methods:{changePage(t){this.$emit("changePage",(t-1)*10)},editRecord(t){this.$emit("getRecord",t)},deleteRecord(t){this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(s=>{s.isConfirmed&&D(t).then(()=>{this.$emit("changePage",0),this.selectedTypes.length=0})})},deleteData(){const t=this.selectedTypes;this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(s=>{s.isConfirmed&&S({types:t}).then(()=>{this.$emit("changePage",0),this.selectedTypes=[]})})},updateStatus(t,s){t.status=s,T(t,t.id).then(()=>{this.$emit("changePage",0)}).catch(n=>{var h;(h=n.response)!=null&&h.data&&console.log(response.message)})}}},z={class:"table-responsive"},J={class:"table align-middle"},K=e("thead",null,[e("tr",null,[e("th",{width:"45px"}),e("th",null,"Name"),e("th",{width:"250"},"Status"),e("th",{width:"150"},"Action")])],-1),Q=["value"],W=["onClick"],X={class:"actions"},Y=["onClick"],Z=e("i",{class:"icon-edit"},null,-1),ee=["onClick"],te=e("i",{class:"icon-delete"},null,-1),se={class:"row gy-4 align-items-center"},ne={class:"col-auto"},ae=["disabled"],ie={class:"col-auto ms-auto"},oe={class:"row align-items-center justify-content-end"},le=e("div",{class:"col-auto"},"Page",-1),ce={class:"col ps-0"},de={class:"pagination-wrap"},re={class:"pagination flex-wrap pagination-sm mb-0"},ue={class:"page-item"};function he(t,s,n,h,a,o){const p=r("btn");return c(),d(f,null,[e("div",z,[e("table",J,[K,e("tbody",null,[(c(!0),d(f,null,b(n.types,(i,_)=>(c(),d("tr",null,[e("td",null,[w(e("input",{class:"form-check-input",value:i.id,"onUpdate:modelValue":s[0]||(s[0]=l=>a.selectedTypes=l),type:"checkbox"},null,8,Q),[[x,a.selectedTypes]])]),e("td",null,g(i.name),1),e("td",null,[e("span",{onClick:l=>o.updateStatus(i,i.status===1?0:1),class:$(i.status==1?"status active":"status")},null,10,W)]),e("td",null,[e("ul",X,[e("li",null,[e("button",{class:"btn btn-link",onClick:l=>o.editRecord(i.id)},[Z,y("Edit ")],8,Y)]),e("li",null,[e("button",{class:"btn",onClick:l=>o.deleteRecord(i.id)},[te,y("Delete ")],8,ee)])])])]))),256))])])]),e("div",se,[e("div",ne,[e("button",{class:"btn btn-danger py-2",onClick:s[1]||(s[1]=(...i)=>o.deleteData&&o.deleteData(...i)),disabled:!a.selectedTypes.length}," Delete Selected ",8,ae)]),e("div",ie,[e("div",oe,[le,e("div",ce,[e("nav",de,[e("ul",re,[(c(!0),d(f,null,b(n.totalCount,i=>(c(),d("div",null,[e("li",ue,[u(p,{onClick:_=>o.changePage(i),class:"page-link",href:"#"},{default:C(()=>[y(g(i),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const me=v(G,[["render",he]]),pe={name:"Types",components:{Add:F,List:me,Breadcrumb:N,LeftSideHeader:P},data(){return{types:[],totalPages:1,totalRecords:0,typeName:"",typeId:0,displayComponent:!0,breadcrumbs:[{class:null,url:"#",name:"Masters"},{class:"active",url:"",name:"Testing Types"}]}},created(){this.getData()},methods:{getData(t=0){this.typeName="",this.typeId=0,this.listLoading=!0,R("?skip="+t).then(s=>{this.totalRecords=s.data.totalRecords,this.totalPages=s.data.totalRecords>10?Math.ceil(s.data.totalRecords/10):1,this.types=s.data.data})},getTestingType(t){this.displayComponent=!1,B(t).then(s=>{this.displayComponent=!0,s.success===!0&&(this.typeName=s.data.name,this.typeId=s.data.id)})}}},_e={class:"section-content bg-white col p-4"},ge={class:"title-box"},fe={class:"row gy-3"},ye={class:"content-wrap pt-4"},ve={key:0},be={class:"row mb-3 align-items-center"},Ce={class:"col"},Te={class:"data-info"};function we(t,s,n,h,a,o){const p=r("Breadcrumb"),i=r("LeftSideHeader"),_=r("Add"),l=r("List");return c(),d("section",_e,[u(p,{crumbs:a.breadcrumbs},null,8,["crumbs"]),e("div",ge,[e("div",fe,[u(i,{headerData:"Testing Types"})])]),e("div",ye,[a.displayComponent?(c(),d("div",ve,[u(_,{typeName:a.typeName,id:a.typeId,onChangePage:o.getData},null,8,["typeName","id","onChangePage"])])):k("",!0),e("div",be,[e("div",Ce,[e("div",Te," Showing "+g(a.types.length)+" of "+g(a.totalRecords)+" Results ",1)])]),u(l,{types:a.types,totalCount:a.totalPages,onChangePage:o.getData,onGetRecord:o.getTestingType},null,8,["types","totalCount","onChangePage","onGetRecord"])])])}const Ne=v(pe,[["render",we]]);export{Ne as default};
