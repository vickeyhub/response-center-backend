import{o as p,f as m,e as o,b as e,k as c,u as d,t as i}from"./app-1983373d.js";import{L as u}from"./List-dc917744.js";import{B as r}from"./Breadcrumb-0722ea03.js";import{L as l}from"./LeftSideHeader-ba42ca70.js";import{f as h}from"./appointment-a94c1285.js";import"./flatpickr-8c54c1e2.js";const f={class:"section-content bg-white col p-4"},g={class:"title-box"},b={class:"row gy-3"},A={class:"content-wrap pt-4"},_={class:"row mb-3 g-3 flex-sm-row-reverse align-items-center"},y={class:"col-sm-auto"},v={class:"data-search"},D=e("div",{class:"col-sm-auto"},null,-1),Q={class:"col"},L={class:"data-info"},w=e("div",null,[e("small")],-1),T={name:"AppointmentList",components:{Breadcrumb:r,LeftSideHeader:l},data(){return{todaysAppointments:0,upcomingAppointments:0,totalAppointments:0,cancelledAppointments:0,appointments:[],totalPages:1,filterQuery:"8",searchQuery:"",debounceTimer:null,breadcrumbs:[{class:null,url:"/referral-appointments",name:"Appointments"},{class:null,url:"/referral-appointments",name:"Referral Appointments"},{class:"active",url:"",name:"List"}]}},created(){this.getData()},methods:{debouncedGetData(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.getData()},300)},getData(n=0){this.filterQuery=this.searchQuery!==""?9:8,this.listLoading=!0,h(`?skip=${n}&filter=${this.filterQuery}&searchQuery=${this.searchQuery}`).then(t=>{this.totalAppointments=t.data.totalAppointments,this.totalPages=t.data.totalAppointments>10?Math.ceil(t.data.totalAppointments/10):1,this.appointments=t.data.appointments,this.todaysAppointments=t.data.todaysAppointments,this.upcomingAppointments=t.data.upcomingAppointments,this.cancelledAppointments=t.data.cancelledAppointments})}}},S=Object.assign(T,{setup(n){return(t,s)=>(p(),m("section",f,[o(r,{crumbs:t.breadcrumbs},null,8,["crumbs"]),e("div",g,[e("div",b,[o(l,{headerData:"Referral Appointments"})])]),e("div",A,[e("div",_,[e("div",y,[e("div",v,[c(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>t.searchQuery=a),onInput:s[1]||(s[1]=(...a)=>t.debouncedGetData&&t.debouncedGetData(...a)),class:"form-control form-control-sm",placeholder:"Search by Patient's Name, Referral Dr. Name or Ref No."},null,544),[[d,t.searchQuery]])])]),D,e("div",Q,[e("div",L," Showing "+i(t.appointments.length)+" of "+i(t.totalAppointments)+" Results ",1),w])]),o(u,{appointments:t.appointments,totalCount:t.totalPages,type:"referral",onChangePage:t.getData},null,8,["appointments","totalCount","onChangePage"])])]))}});export{S as default};
