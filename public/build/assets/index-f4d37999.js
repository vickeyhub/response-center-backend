import{o as d,f as r,e as n,b as e,k as i,u as c,J as u,t as l}from"./app-1983373d.js";import{L as h}from"./List-dc917744.js";import{B as p}from"./Breadcrumb-0722ea03.js";import{L as m}from"./LeftSideHeader-ba42ca70.js";import{f as g}from"./appointment-a94c1285.js";import"./flatpickr-8c54c1e2.js";const f={class:"section-content bg-white col p-4"},A={class:"title-box"},b={class:"row gy-3"},v={class:"content-wrap pt-4"},_={class:"row mb-3 g-3 flex-sm-row-reverse align-items-center"},y={class:"col-sm-auto"},D={class:"data-search"},Q={class:"col-sm-auto"},L={class:""},P=e("option",{value:"0"},"Pending Appointments",-1),w=e("option",{value:"4"},"Cancelled Appointments",-1),T=e("option",{value:"5"},"All Appointments",-1),C=[P,w,T],B={class:"col"},S={class:"data-info"},k={name:"AppointmentList",components:{Breadcrumb:p,LeftSideHeader:m},data(){return{todaysAppointments:0,upcomingAppointments:0,totalAppointments:0,cancelledAppointments:0,appointments:[],totalPages:1,filterQuery:"0",searchQuery:"",debounceTimer:null,breadcrumbs:[{class:null,url:"/confirmed-appointments",name:"Appointments"},{class:null,url:"/pending-appointments",name:"Pending Appointments"},{class:"active",url:"",name:"List"}]}},created(){this.getData()},methods:{debouncedGetData(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.getData()},300)},getData(a=0){this.listLoading=!0,g(`?skip=${a}&filter=${this.filterQuery}&searchQuery=${this.searchQuery}`).then(t=>{this.totalAppointments=t.data.totalAppointments,this.totalPages=t.data.totalAppointments>10?Math.ceil(t.data.totalAppointments/10):1,this.appointments=t.data.appointments,this.todaysAppointments=t.data.todaysAppointments,this.upcomingAppointments=t.data.upcomingAppointments,this.cancelledAppointments=t.data.cancelledAppointments})}}},R=Object.assign(k,{setup(a){return(t,o)=>(d(),r("section",f,[n(p,{crumbs:t.breadcrumbs},null,8,["crumbs"]),e("div",A,[e("div",b,[n(m,{headerData:"Pending Appointments"})])]),e("div",v,[e("div",_,[e("div",y,[e("div",D,[i(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>t.searchQuery=s),onInput:o[1]||(o[1]=(...s)=>t.debouncedGetData&&t.debouncedGetData(...s)),class:"form-control form-control-sm",placeholder:"Search by Name, Email or Ref No."},null,544),[[c,t.searchQuery]])])]),e("div",Q,[e("div",L,[i(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>t.filterQuery=s),onChange:o[3]||(o[3]=s=>t.getData()),name:"",id:"",class:"form-select form-control"},C,544),[[u,t.filterQuery]])])]),e("div",B,[e("div",S," Showing "+l(t.appointments.length)+" of "+l(t.totalAppointments)+" Results ",1)])]),n(h,{appointments:t.appointments,totalCount:t.totalPages,type:"pending",onChangePage:t.getData},null,8,["appointments","totalCount","onChangePage"])])]))}});export{R as default};
