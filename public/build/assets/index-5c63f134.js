import{d as y,a as k,u as D,f as S}from"./blog-54eb6a53.js";import{n as x}from"./no-img-df4ddc69.js";import{_ as w,r as h,o as l,f as i,b as t,F as v,j as b,k as C,v as B,t as u,n as R,h as f,e as _,w as P,u as $}from"./app-1983373d.js";import{B as L}from"./Breadcrumb-0722ea03.js";import{R as A}from"./RightSideButton-c34e14fb.js";import{L as N}from"./LeftSideHeader-ba42ca70.js";const T={props:{blogs:Array,totalCount:Number},data(){return{selectedServices:[]}},methods:{noImage(s){s.target.src=x},formatDate(s){const e=new Date(s).getFullYear(),c=new Date(s).getMonth(),r=new Date(s).getDate();return`${c+1}/${r}/${e}`},changePage(s){this.$emit("changePage",(s-1)*10)},deleteRecord(s){this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(e=>{e.isConfirmed&&y(s).then(()=>{this.$emit("changePage",0)})})},deleteData(){const s=this.selectedServices;this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(e=>{e.isConfirmed&&k({blog_ids:s}).then(()=>{this.$emit("changePage",0),this.selectedServices=[]})})},updateStatus(s,e){s.status=e,D(s,s.id).then(()=>{this.$emit("changePage",0)}).catch(c=>{var r;(r=c.response)!=null&&r.data&&console.log(response.message)})}}},I={class:"table-responsive"},M={class:"table align-middle"},V=t("thead",null,[t("tr",null,[t("th",{width:"45px"}),t("th",null,"Title"),t("th",null,"Author's Name"),t("th",null,"Published On"),t("th",{width:"250"},"Status"),t("th",{width:"150"},"Action")])],-1),E={key:0},Q=["value"],F={class:"row flex-nowrap align-items-center"},H={class:"col-auto"},j={class:"user-img"},U=["src"],z=["src"],O={class:"col"},Y={class:"user-info"},q=["onClick"],G={class:"actions"},J=["onClick"],K=t("i",{class:"icon-edit"},null,-1),W=["onClick"],X=t("i",{class:"icon-delete"},null,-1),Z={key:1},tt=t("tr",null,[t("td",{colspan:"6",class:"text-center"},"No record found")],-1),et=[tt],st={class:"row gy-4 align-items-center"},ot={class:"col-auto"},nt=["disabled"],at={class:"col-auto ms-auto"},lt={class:"row align-items-center justify-content-end"},it=t("div",{class:"col-auto"},"Page",-1),ct={class:"col ps-0"},dt={class:"pagination-wrap"},rt={class:"pagination flex-wrap pagination-sm mb-0"},ut={class:"page-item"};function ht(s,e,c,r,n,a){const g=h("btn");return l(),i(v,null,[t("div",I,[t("table",M,[V,c.blogs.length?(l(),i("tbody",E,[(l(!0),i(v,null,b(c.blogs,(o,m)=>(l(),i("tr",{key:m},[t("td",null,[C(t("input",{class:"form-check-input",value:o.id,"onUpdate:modelValue":e[0]||(e[0]=d=>n.selectedServices=d),type:"checkbox"},null,8,Q),[[B,n.selectedServices]])]),t("td",null,[t("div",F,[t("div",H,[t("div",j,[o.image!=""||o.image!=null?(l(),i("img",{key:0,src:`${o.image}`,alt:"",onError:e[1]||(e[1]=(...d)=>a.noImage&&a.noImage(...d))},null,40,U)):(l(),i("img",{key:1,src:s.noImg},null,8,z))])]),t("div",O,[t("div",Y,u(o.title),1)])])]),t("td",null,u(o.author_name),1),t("td",null,u(a.formatDate(o.created_at)),1),t("td",null,[t("span",{onClick:d=>a.updateStatus(o,o.status===1?0:1),class:R(o.status==1?"status active":"status")},null,10,q)]),t("td",null,[t("ul",G,[t("li",null,[t("button",{class:"btn btn-link",onClick:d=>s.goToEdit(`/blogs/edit/${o.id}`,o.id)},[K,f("Edit ")],8,J)]),t("li",null,[t("button",{class:"btn",onClick:d=>a.deleteRecord(o.id)},[X,f("Delete ")],8,W)])])])]))),128))])):(l(),i("tbody",Z,et))])]),t("div",st,[t("div",ot,[t("button",{class:"btn btn-danger py-2",onClick:e[2]||(e[2]=(...o)=>a.deleteData&&a.deleteData(...o)),disabled:!n.selectedServices.length}," Delete Selected ",8,nt)]),t("div",at,[t("div",lt,[it,t("div",ct,[t("nav",dt,[t("ul",rt,[(l(!0),i(v,null,b(c.totalCount,o=>(l(),i("div",null,[t("li",ut,[_(g,{onClick:m=>a.changePage(o),class:"page-link",href:"#"},{default:P(()=>[f(u(o),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const _t=w(T,[["render",ht]]),mt={name:"BlogList",components:{List:_t,Breadcrumb:L,RightSideButton:A,LeftSideHeader:N},data(){return{btnData:{title:"Add New",url:"/blogs/add"},blogs:[],searchQuery:"",totalPages:1,totalRecords:0,breadcrumbs:[{class:null,url:"/blogs/list",name:"Blogs"},{class:"active",url:"",name:"List"}]}},created(){this.getData()},methods:{getData(s=0){this.listLoading=!0,S(`?skip=${s}&search=${this.searchQuery}`).then(e=>{this.totalRecords=e.data.totalRecords,this.totalPages=e.data.totalRecords>10?Math.ceil(e.data.totalRecords/10):1,this.blogs=e.data.data})}}},gt={class:"section-content bg-white col p-4"},vt={class:"title-box"},ft={class:"row gy-3"},pt={class:"content-wrap pt-4"},bt={class:"row mb-3 g-3 flex-sm-row-reverse align-items-center"},wt={class:"col-sm-auto"},Ct={class:"data-search"},yt={class:"col"},kt={class:"data-info"};function Dt(s,e,c,r,n,a){const g=h("Breadcrumb"),o=h("LeftSideHeader"),m=h("RightSideButton"),d=h("List");return l(),i("section",gt,[_(g,{crumbs:n.breadcrumbs},null,8,["crumbs"]),t("div",vt,[t("div",ft,[_(o,{headerData:"All Blogs"}),_(m,{btnData:n.btnData},null,8,["btnData"])])]),t("div",pt,[t("div",bt,[t("div",wt,[t("div",Ct,[C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=p=>n.searchQuery=p),onInput:e[1]||(e[1]=p=>a.getData()),class:"form-control form-control-sm",placeholder:"Search by Title/Author's Name"},null,544),[[$,n.searchQuery]])])]),t("div",yt,[t("div",kt," Showing "+u(n.blogs.length)+" of "+u(n.totalRecords)+" Results ",1)])]),_(d,{blogs:n.blogs,totalCount:n.totalPages,onChangePage:a.getData},null,8,["blogs","totalCount","onChangePage"])])])}const Lt=w(mt,[["render",Dt]]);export{Lt as default};
