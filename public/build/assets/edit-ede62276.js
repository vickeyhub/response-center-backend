import{b as C,e as E}from"./mentalHealth-061c93a4.js";import{_ as w,r as p,o as m,f as c,l as u,b as e,e as i,w as H,x,t as v,n as k,F as V,j as I,A as M,y as F,z as T,h as r}from"./app-1983373d.js";/* empty css                                                         */import{B as U}from"./Breadcrumb-0722ea03.js";import{R as B}from"./RightSideButton-c34e14fb.js";import{L as N}from"./LeftSideHeader-ba42ca70.js";const S={data(){return{displayOverlay:!0,images:[],uploadedImages:[],fileName:"",videoName:"",dragging:!1,image:null,mentalHealthData:{title:null,description:"",type:"",categories:[],meta_title:null,meta_description:null,meta_keywords:null,images:[],files:[],video:"",externalLink:"",youtubeLink:"",vimeoLink:""},types:[{text:"Images",value:"image"},{text:"Video",value:"video"},{text:"Youtube Link",value:"youtube-link"},{text:"External Link",value:"external-link"},{text:"File",value:"file"}],tempmentalHealthData:{},schema:{title:"required|min:3|max:300",categories:"required",type:"required"},descError:null,imgError:null,videoError:null}},async mounted(){await this.getCategories("mental-health"),await this.getMentalHealth();let t=this;new Promise(function(a,d){setTimeout(()=>{if(t.mentalHealthData=t.tempmentalHealthData,t.videoName=t.mentalHealthData.type=="video"&&t.mentalHealthData.video!=null?t.mentalHealthData.video.slice(t.mentalHealthData.video.indexOf("uploads/")+8):null,t.file=t.mentalHealthData.type=="video"&&t.mentalHealthData.video!=null?t.mentalHealthData.video:t.mentalHealthData.type=="file"?t.mentalHealthData.file:null,t.fileName=t.mentalHealthData.type=="file"&&t.mentalHealthData.file!=null?t.mentalHealthData.file.slice(t.mentalHealthData.file.indexOf("uploads/")+8):null,t.mentalHealthData.externalLink=t.mentalHealthData.type=="external-link"?t.mentalHealthData.external_link:null,t.mentalHealthData.youtubeLink=t.mentalHealthData.type=="youtube-link"?t.mentalHealthData.youtube_link:null,t.mentalHealthData.type=="image")for(let g=0;g<t.mentalHealthData.images.length;g++)t.images.push(t.mentalHealthData.images[g].image);t.displayOverlay=!1,a()},2500)})},methods:{async getMentalHealth(){const t=`${this.$route.params.blogId}`;C(t).then(a=>{a.success===!0&&(this.tempmentalHealthData=a.data)})},onTypeChange(){this.videoError=null,this.imgError=null,this.schema.youtubeLink="",this.schema.vimeoLink="",this.schema.externalLink="",this.videoName="",this.file="",this.mentalHealthData.type=="youtube-link"?this.schema.youtubeLink="required|regex:^(https?://)?((www.)?youtube.com)/.+$|url":this.mentalHealthData.type=="vimeo-link"?this.schema.vimeoLink="required":this.mentalHealthData.type=="external-link"&&(this.schema.externalLink="required|url")},updateMentalHealth(){if(this.descError=null,this.mentalHealthData.description=="")this.descError="This field is required.";else if(this.mentalHealthData.description.length<50)this.descError="Minimum 50 characters are allowed.";else if(this.mentalHealthData.type=="image"&&!this.uploadedImages.length&&!this.images.length)this.imgError="Please upload at least 1 image.";else if(this.mentalHealthData.type=="video"&&this.file=="")this.videoError="Please upload video.";else{let t=new FormData;if(t.append("file",this.file),t.append("video",this.file),t.append("title",this.mentalHealthData.title),t.append("type",this.mentalHealthData.type),t.append("categories",this.mentalHealthData.categoryIds),t.append("description",this.mentalHealthData.description),t.append("meta_title",this.mentalHealthData.meta_title),t.append("meta_description",this.mentalHealthData.meta_description),t.append("meta_keywords",this.mentalHealthData.meta_keywords),t.append("youtube_link",this.mentalHealthData.youtubeLink),t.append("external_link",this.mentalHealthData.externalLink),this.mentalHealthData.type=="image"){if(this.uploadedImages.length)for(let a=0;a<this.uploadedImages.length;a++)t.append("images[]",this.uploadedImages[a]);if(this.uploadedImages.length!=this.images.length){const a=this.images.length-this.uploadedImages.length;for(let d=0;d<a;d++)t.append("images[]",this.images[d])}}E(t,this.mentalHealthData.id).then(a=>{this.handleResponse(a),a.success==!0&&this.$router.push({path:"/mental-health/list"})}).catch(a=>{this.handleCatch(a)})}},onChangeOfTitle(){this.mentalHealthData.meta_title=this.mentalHealthData.title,this.mentalHealthData.meta_description=this.mentalHealthData.title,this.mentalHealthData.meta_keywords=this.mentalHealthData.title},onChange(t){var a=t.target.files||t.dataTransfer.files;if(!a.length){this.dragging=!1;return}this.createImage(a)},removeImage(t){this.images.splice(t,1)},createImage(t){for(var a=this,d=0;d<t.length;d++){let l=t[d];if(!l.type.match("jpg.*")&&!l.type.match("jpeg.*")&&!l.type.match("png.*")){this.handleResponse({message:"Format accepted: jpg, jpeg, png",success:!1}),a.images=[],this.dragging=!1;return}if(l.size>5e6){this.handleResponse({message:"Maximum file size whould be 5 MB.",success:!1}),a.images=[],this.dragging=!1;return}var g=new FileReader;g.onload=function(n){const h=n.target.result;a.images.push(h)},g.readAsDataURL(t[d]),this.uploadedImages.push(t[d])}},createVideo(t){if(!t.type.match("mp4.*")&&!t.type.match("mov.*")){this.handleResponse({message:"Format accepted: mp4, mov",success:!1}),this.dragging=!1;return}if(t.size>5e6){this.handleResponse({message:"please check file size no over 5 MB.",success:!1}),this.dragging=!1;return}this.videoName=t.name,this.file=t,this.dragging=!1},createFile(t){if(!t.type.match("application/msword.*")&&!t.type.match("application/pdf.*")&&!t.type.match("application/vnd.ms-excel.*")){this.handleResponse({message:"Format accepted: doc, docx, pdf, xlsx",success:!1}),this.dragging=!1;return}if(t.size>5e6){this.handleResponse({message:"please check file size no over 5 MB.",success:!1}),this.dragging=!1;return}this.fileName=t.name,this.file=t,this.dragging=!1},removeFile(){this.file=""},onVideoChange(t){this.videoError=null;var a=t.target.files||t.dataTransfer.files;if(!a.length){this.dragging=!1;return}this.createVideo(a[0])},onFileChange(t){var a=t.target.files||t.dataTransfer.files;if(!a.length){this.dragging=!1;return}this.createFile(a[0])},getYouTubeVideoId(t){const a=/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/ ]{11})/,d=t.match(a);return d&&d[1]?d[1]:null}}},o=t=>(F("data-v-fb75878c"),t=t(),T(),t),R={key:0,class:"overlay"},Z=o(()=>e("div",{class:"overlay__inner"},[e("div",{class:"overlay__content"},[e("span",{class:"spinner"})])],-1)),j=[Z],q={class:"form-box"},z={class:"row"},O=o(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"Basic Details")],-1)),P={class:"col-md-12"},A={class:"form-field"},Y=o(()=>e("label",{for:""},[r("Title"),e("sup",null,"*")],-1)),K={class:"error invalid-feedback"},W={class:"col-md-6"},G={class:"form-field"},J=o(()=>e("label",{for:""},[r("Categories"),e("sup",null,"*")],-1)),Q={key:0,class:"error invalid-feedback"},X={class:"col-md-6"},$={class:"form-field"},ee=o(()=>e("label",{for:""},"Type",-1)),te={key:0,class:"error invalid-feedback"},ae={key:0,class:"col-12"},le={class:"form-field mb-2"},se=o(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},[r("Upload Image"),e("sup",null,"*")])]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),r(" Format accepted: jpg, jpeg, png ")])])],-1)),oe={class:"uploader position-relative"},ie={class:"uploader-info"},ne=o(()=>e("i",{class:"icon-upload"},null,-1)),re=o(()=>e("p",{class:"dropZone-title"},[r(" Drag & drop or "),e("strong",null,"browse"),r(" your file. ")],-1)),de=[ne,re],me={class:"error invalid-feedback"},ce={class:"thumbWrapper"},he={key:0,class:"uploaded-images"},ue={class:"thumbBox"},pe=["onClick"],ge=o(()=>e("i",{class:"bi bi-trash-fill"},null,-1)),fe=[ge],_e=["src"],ve={key:1,class:"col-12"},ye={class:"form-field"},De=o(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},[r("Upload File"),e("sup",null,"*")])]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),r(" Format accepted: doc, docx, pdf, xlsx ")])])],-1)),be={class:"uploader position-relative"},He={class:"uploader-info"},ke=o(()=>e("i",{class:"icon-upload"},null,-1)),xe=o(()=>e("p",{class:"dropZone-title"},[r(" Drag & drop or "),e("strong",null,"browse"),r(" your file. ")],-1)),Ve={key:0},we={key:2,class:"col-12"},Le={class:"form-field"},Ce=o(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},[r("Upload Video"),e("sup",null,"*")])]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),r(" Format accepted: mp4, mov ")])])],-1)),Ee={class:"uploader position-relative"},Ie={class:"uploader-info"},Me=o(()=>e("i",{class:"icon-upload"},null,-1)),Fe=o(()=>e("p",{class:"dropZone-title"},[r(" Drag & drop or "),e("strong",null,"browse"),r(" your file. ")],-1)),Te={key:0},Ue={class:"error invalid-feedback"},Be={class:"error invalid-feedback"},Ne={key:3,class:"col-12"},Se=o(()=>e("label",{for:""},[r("Youtube Link"),e("sup",null,"*")],-1)),Re={class:"error invalid-feedback"},Ze={key:4,class:"col-12"},je=o(()=>e("label",{for:""},[r("Vimeo Link"),e("sup",null,"*")],-1)),qe={class:"error invalid-feedback"},ze={key:5,class:"col-12"},Oe=o(()=>e("label",{for:""},[r("External Link"),e("sup",null,"*")],-1)),Pe={class:"error invalid-feedback"},Ae={class:"col-12"},Ye={class:"form-field"},Ke=o(()=>e("label",{for:""},[r("Description"),e("sup",null,"*")],-1)),We={class:"error invalid-feedback"},Ge={class:"row"},Je=o(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"SEO Fields")],-1)),Qe={class:"col-md-4"},Xe={class:"form-field"},$e=o(()=>e("label",{for:""},"Meta Title",-1)),et={class:"col-md-4"},tt={class:"form-field"},at=o(()=>e("label",{for:""},"Meta Description",-1)),lt={class:"col-md-4"},st={class:"form-field"},ot=o(()=>e("label",{for:""},"Meta Keywords",-1)),it=o(()=>e("div",{class:"submit-wrap pt-3"},[e("button",{type:"submit",class:"btn btn-secondary"},"SUBMIT")],-1));function nt(t,a,d,g,l,n){const h=p("vee-field"),f=p("ErrorMessage"),y=p("Multiselect"),b=p("ckeditor"),L=p("vee-form");return m(),c(V,null,[l.displayOverlay?(m(),c("div",R,j)):u("",!0),e("div",q,[i(L,{"validation-schema":l.schema,onSubmit:n.updateMentalHealth,enctype:"multipart/form-data"},{default:H(()=>[e("div",z,[O,e("div",P,[e("div",A,[Y,i(h,{name:"title",type:"text",modelValue:l.mentalHealthData.title,"onUpdate:modelValue":a[0]||(a[0]=s=>l.mentalHealthData.title=s),onInput:a[1]||(a[1]=s=>n.onChangeOfTitle()),class:"form-control",placeholder:"Enter Title"},null,8,["modelValue"]),e("div",K,[i(f,{class:"invalid-feedback",name:"title"})])])]),e("div",W,[e("div",G,[J,i(h,{class:"form-control",name:"categories",type:"text",modelValue:l.mentalHealthData.categoryIds,"onUpdate:modelValue":a[3]||(a[3]=s=>l.mentalHealthData.categoryIds=s)},{default:H(({field:s,errors:_})=>[i(y,x({modelValue:l.mentalHealthData.categoryIds,"onUpdate:modelValue":a[2]||(a[2]=D=>l.mentalHealthData.categoryIds=D),mode:"tags"},s,{"close-on-select":!1,searchable:!0,"create-option":!1,valueProp:"id",label:"name",required:!0,options:t.categories,placeholder:"Select Categories"}),null,16,["modelValue","options"]),_[0]?(m(),c("div",Q,v(_[0]),1)):u("",!0)]),_:1},8,["modelValue"])])]),e("div",X,[e("div",$,[ee,i(h,{class:"form-select",name:"type",type:"text",modelValue:l.mentalHealthData.type,"onUpdate:modelValue":a[5]||(a[5]=s=>l.mentalHealthData.type=s)},{default:H(({field:s,errors:_})=>[i(y,x({modelValue:l.mentalHealthData.type,"onUpdate:modelValue":a[4]||(a[4]=D=>l.mentalHealthData.type=D),onChange:n.onTypeChange,mode:"single"},s,{"close-on-select":!0,searchable:!0,"create-option":!1,valueProp:"value",label:"text",required:!0,options:l.types,placeholder:"Select Type"}),null,16,["modelValue","onChange","options"]),_[0]?(m(),c("div",te,v(_[0]),1)):u("",!0)]),_:1},8,["modelValue"])])]),l.mentalHealthData.type=="image"?(m(),c("div",ae,[e("div",le,[se,e("div",oe,[e("div",ie,[e("div",{class:k(["dropZone",l.dragging?"dropZone-over":""]),onDragenter:a[8]||(a[8]=s=>l.dragging=!0),onDragleave:a[9]||(a[9]=s=>l.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:a[6]||(a[6]=(...s)=>n.onChange&&n.onChange(...s))},de,32),e("input",{type:"file",accept:"image/*",multiple:"",onChange:a[7]||(a[7]=(...s)=>n.onChange&&n.onChange(...s))},null,32)],34)])])]),e("div",me,v(l.imgError),1),e("div",ce,[l.images?(m(),c("ul",he,[(m(!0),c(V,null,I(l.images,(s,_)=>(m(),c("li",null,[e("div",ue,[e("a",{href:"",class:"delete",onClick:M(D=>n.removeImage(_),["prevent"])},fe,8,pe),e("img",{src:s,alt:""},null,8,_e)])]))),256))])):u("",!0)])])):u("",!0),l.mentalHealthData.type=="file"?(m(),c("div",ve,[e("div",ye,[De,e("div",be,[e("div",He,[e("div",{class:k(["dropZone",l.dragging?"dropZone-over":""]),onDragenter:a[12]||(a[12]=s=>l.dragging=!0),onDragleave:a[13]||(a[13]=s=>l.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:a[10]||(a[10]=(...s)=>n.onFileChange&&n.onFileChange(...s))},[ke,xe,l.fileName?(m(),c("small",Ve,v(l.fileName),1)):u("",!0)],32),e("input",{type:"file",onChange:a[11]||(a[11]=(...s)=>n.onFileChange&&n.onFileChange(...s)),accept:"application/pdf,application/vnd.ms-excel,.doc,.docx"},null,32)],34)])])])])):u("",!0),l.mentalHealthData.type=="video"?(m(),c("div",we,[e("div",Le,[Ce,e("div",Ee,[e("div",Ie,[e("div",{class:k(["dropZone",l.dragging?"dropZone-over":""]),onDragenter:a[16]||(a[16]=s=>l.dragging=!0),onDragleave:a[17]||(a[17]=s=>l.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:a[14]||(a[14]=(...s)=>n.onVideoChange&&n.onVideoChange(...s))},[Me,Fe,l.videoName?(m(),c("small",Te,v(l.videoName),1)):u("",!0)],32),e("input",{type:"file",accept:"video/*",onChange:a[15]||(a[15]=(...s)=>n.onVideoChange&&n.onVideoChange(...s))},null,32)],34)])]),e("div",Ue,[i(f,{class:"invalid-feedback",name:"video"})])]),e("div",Be,v(l.videoError),1)])):u("",!0),l.mentalHealthData.type=="youtube-link"?(m(),c("div",Ne,[Se,i(h,{name:"youtubeLink",type:"text",modelValue:l.mentalHealthData.youtubeLink,"onUpdate:modelValue":a[18]||(a[18]=s=>l.mentalHealthData.youtubeLink=s),class:"form-control",placeholder:"https://www.youtube.com/watch?v=9y3N0TYr_Yc"},null,8,["modelValue"]),e("div",Re,[i(f,{class:"invalid-feedback",name:"youtubeLink"})])])):u("",!0),l.mentalHealthData.type=="vimeo-link"?(m(),c("div",Ze,[je,i(h,{name:"vimeoLink",type:"text",modelValue:l.mentalHealthData.vimeoLink,"onUpdate:modelValue":a[19]||(a[19]=s=>l.mentalHealthData.vimeoLink=s),class:"form-control",placeholder:"https://vimeo.com/22484953"},null,8,["modelValue"]),e("div",qe,[i(f,{class:"invalid-feedback",name:"vimeoLink"})])])):u("",!0),l.mentalHealthData.type=="external-link"?(m(),c("div",ze,[Oe,i(h,{name:"externalLink",type:"text",modelValue:l.mentalHealthData.externalLink,"onUpdate:modelValue":a[20]||(a[20]=s=>l.mentalHealthData.externalLink=s),class:"form-control",placeholder:"http://"},null,8,["modelValue"]),e("div",Pe,[i(f,{class:"invalid-feedback",name:"externalLink"})])])):u("",!0),e("div",Ae,[e("div",Ye,[Ke,i(b,{editor:t.editor,modelValue:l.mentalHealthData.description,"onUpdate:modelValue":a[21]||(a[21]=s=>l.mentalHealthData.description=s),config:t.editorConfig},null,8,["editor","modelValue","config"]),e("div",We,v(l.descError),1)])])]),e("div",Ge,[Je,e("div",Qe,[e("div",Xe,[$e,i(h,{name:"meta_title",type:"text",modelValue:l.mentalHealthData.meta_title,"onUpdate:modelValue":a[22]||(a[22]=s=>l.mentalHealthData.meta_title=s),class:"form-control",placeholder:"Enter Meta Title"},null,8,["modelValue"])])]),e("div",et,[e("div",tt,[at,i(h,{name:"meta_description",type:"text",modelValue:l.mentalHealthData.meta_description,"onUpdate:modelValue":a[23]||(a[23]=s=>l.mentalHealthData.meta_description=s),class:"form-control",placeholder:"Enter Meta Description"},null,8,["modelValue"])])]),e("div",lt,[e("div",st,[ot,i(h,{name:"meta_keywords",type:"text",modelValue:l.mentalHealthData.meta_keywords,"onUpdate:modelValue":a[24]||(a[24]=s=>l.mentalHealthData.meta_keywords=s),class:"form-control",placeholder:"Enter Meta Keywords"},null,8,["modelValue"])])])]),it]),_:1},8,["validation-schema","onSubmit"])])],64)}const rt=w(S,[["render",nt],["__scopeId","data-v-fb75878c"]]),dt={name:"EditBlog",components:{Edit:rt,Breadcrumb:U,RightSideButton:B,LeftSideHeader:N},data(){return{btnData:{title:"All Articles",url:"/mental-health/list"},breadcrumbs:[{class:null,url:"/mental-health/list",name:"Mental Health"},{class:"active",url:"",name:"Edit"}]}}},mt={class:"section-content bg-white col p-4"},ct={class:"title-box"},ht={class:"row gy-3"},ut={class:"content-wrap pt-4"};function pt(t,a,d,g,l,n){const h=p("Breadcrumb"),f=p("LeftSideHeader"),y=p("RightSideButton"),b=p("Edit",!0);return m(),c("section",mt,[i(h,{crumbs:l.breadcrumbs},null,8,["crumbs"]),e("div",ct,[e("div",ht,[i(f,{headerData:"Edit Article"}),i(y,{btnData:l.btnData},null,8,["btnData"])])]),e("div",ut,[i(b)])])}const bt=w(dt,[["render",pt]]);export{bt as default};
