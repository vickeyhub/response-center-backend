import{u as k,c as w,a as y,d as x,b as $,f as P,e as N}from"./speciality-6ffd6e2d.js";import{_ as v,r,o as l,f as c,e as h,w as S,b as e,t as p,F as g,j as C,k as R,v as B,n as D,l as f,h as b}from"./app-1983373d.js";import{B as L}from"./Breadcrumb-0722ea03.js";import{L as A}from"./LeftSideHeader-ba42ca70.js";const M={name:"Specialities",props:{specialityName:{type:String,default:""},id:{type:Number,default:0}},data(){return{name:this.specialityName!=""?this.specialityName:null,schema:{name:"required|min:1|max:50|regex:^([^0-9]*)$"}}},methods:{submit(s,{resetForm:t}){this.id>0?k({name:this.name},this.id).then(i=>{this.handleResponse(i),i.success==!0&&(this.name=" ",this.$emit("changePage",0))}).catch(i=>{this.handleCatch(i)}):w({name:this.name}).then(i=>{this.handleResponse(i),i.success==!0&&(t(),this.$emit("changePage",0))}).catch(i=>{this.handleCatch(i)})}}},V={class:"form-box mb-3"},O={class:"row"},E={class:"col col-xl-6"},I={class:"form-field"},U={class:"error invalid-feedback"},H={class:"col-sm-auto"},T={class:"submit-wrap"},j={type:"submit",class:"btn btn-primary-light btn-medium min-small"};function F(s,t,i,_,n,o){const m=r("vee-field"),a=r("ErrorMessage"),u=r("vee-form");return l(),c("div",V,[h(u,{"validation-schema":n.schema,onSubmit:o.submit},{default:S(()=>[e("div",O,[e("div",E,[e("div",I,[h(m,{name:"name",type:"text",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=d=>n.name=d),validateOnModelUpdate:!1,validateOnBlur:!1,validateOnChange:!1,validateOnInput:!1,validateOnMount:!1,class:"form-control",placeholder:"Enter Speciality Name"},null,8,["modelValue"]),e("div",U,[h(a,{class:"invalid-feedback",name:"name"})])])]),e("div",H,[e("div",T,[e("button",j,p(i.id==0?"Add":"Update"),1)])])])]),_:1},8,["validation-schema","onSubmit"])])}const G=v(M,[["render",F]]),q={props:{specialities:Array,totalCount:Number},data(){return{selectedSpecialities:[]}},methods:{up(s){y({order_number:s,direction:"up"}).then(i=>{this.$emit("changePage",0)})},down(s){y({order_number:s,direction:"down"}).then(i=>{this.$emit("changePage",0)})},changePage(s){this.$emit("changePage",(s-1)*10)},editRecord(s){this.$emit("getRecord",s)},deleteRecord(s){this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(t=>{t.isConfirmed&&x(s).then(()=>{this.$emit("changePage",0),this.selectedSpecialities.length=0})})},deleteData(){const s=this.selectedSpecialities;this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(t=>{t.isConfirmed&&$({specialities:s}).then(()=>{this.$emit("changePage",0),this.selectedSpecialities=[]})})},updateStatus(s,t){s.status=t,k(s,s.id).then(()=>{this.$emit("changePage",0)}).catch(i=>{var _;(_=i.response)!=null&&_.data&&console.log(response.message)})}}},z={class:"table-responsive"},J={class:"table align-middle"},K=e("thead",null,[e("tr",null,[e("th",{width:"45px"}),e("th",null,"Name"),e("th",{width:"250"},"Status"),e("th",{width:"120",class:"text-center"},"Order"),e("th",{width:"150"},"Action")])],-1),Q={key:0},W=["value"],X=["onClick"],Y={nowrap:"",class:"text-center"},Z=["onClick"],ee=e("i",{class:"bi bi-arrow-bar-down"},null,-1),te=[ee],se=["onClick"],ie=e("i",{class:"bi bi-arrow-bar-up"},null,-1),ae=[ie],ne={class:"actions"},oe=["onClick"],le=e("i",{class:"icon-edit"},null,-1),ce=["onClick"],de=e("i",{class:"icon-delete"},null,-1),re={key:1},he=e("tr",null,[e("td",{colspan:"4",class:"text-center"},"No record found")],-1),ue=[he],_e={class:"row gy-4 align-items-center"},me={class:"col-auto"},pe=["disabled"],ge={class:"col-auto ms-auto"},be={class:"row align-items-center justify-content-end"},fe=e("div",{class:"col-auto"},"Page",-1),ve={class:"col ps-0"},ye={class:"pagination-wrap"},Ce={class:"pagination flex-wrap pagination-sm mb-0"},ke={class:"page-item"};function Se(s,t,i,_,n,o){const m=r("btn");return l(),c(g,null,[e("div",z,[e("table",J,[K,i.specialities.length?(l(),c("tbody",Q,[(l(!0),c(g,null,C(i.specialities,(a,u)=>(l(),c("tr",{key:u},[e("td",null,[R(e("input",{class:"form-check-input",value:a.id,"onUpdate:modelValue":t[0]||(t[0]=d=>n.selectedSpecialities=d),type:"checkbox"},null,8,W),[[B,n.selectedSpecialities]])]),e("td",null,p(a.name),1),e("td",null,[e("span",{onClick:d=>o.updateStatus(a,a.status===1?0:1),class:D(a.status==1?"status active":"status")},null,10,X)]),e("td",Y,[u!=i.specialities.length-1?(l(),c("a",{key:0,class:"order-key",onClick:d=>o.down(a.order_number)},te,8,Z)):f("",!0),a.order_number!="1"?(l(),c("a",{key:1,class:"order-key",onClick:d=>o.up(a.order_number)},ae,8,se)):f("",!0)]),e("td",null,[e("ul",ne,[e("li",null,[e("button",{class:"btn btn-link",onClick:d=>o.editRecord(a.id)},[le,b("Edit ")],8,oe)]),e("li",null,[e("button",{class:"btn",onClick:d=>o.deleteRecord(a.id)},[de,b("Delete ")],8,ce)])])])]))),128))])):(l(),c("tbody",re,ue))])]),e("div",_e,[e("div",me,[e("button",{class:"btn btn-danger py-2",onClick:t[1]||(t[1]=(...a)=>o.deleteData&&o.deleteData(...a)),disabled:!n.selectedSpecialities.length}," Delete Selected ",8,pe)]),e("div",ge,[e("div",be,[fe,e("div",ve,[e("nav",ye,[e("ul",Ce,[(l(!0),c(g,null,C(i.totalCount,a=>(l(),c("div",null,[e("li",ke,[h(m,{onClick:u=>o.changePage(a),class:"page-link",href:"#"},{default:S(()=>[b(p(a),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const we=v(q,[["render",Se]]),xe={name:"Specialities",components:{Add:G,List:we,Breadcrumb:L,LeftSideHeader:A},data(){return{specialities:[],totalPages:1,totalRecords:0,specialityName:"",specialityId:0,displayComponent:!0,breadcrumbs:[{class:null,url:"#",name:"Masters"},{class:"active",url:"",name:"Specialities"}]}},created(){this.getData()},methods:{getData(s=0){this.specialityName="",this.specialityId=0,this.listLoading=!0,P("?skip="+s).then(t=>{this.totalRecords=t.data.totalRecords,this.totalPages=t.data.totalRecords>10?Math.ceil(t.data.totalRecords/10):1,this.specialities=t.data.data})},getSpeciality(s){this.displayComponent=!1,N(s).then(t=>{this.displayComponent=!0,t.success===!0&&(this.specialityName=t.data.name,this.specialityId=t.data.id)})}}},$e={class:"section-content bg-white col p-4"},Pe={class:"title-box"},Ne={class:"row gy-3"},Re={class:"content-wrap pt-4"},Be={key:0},De={class:"row mb-3 align-items-center"},Le={class:"col"},Ae={class:"data-info"};function Me(s,t,i,_,n,o){const m=r("Breadcrumb"),a=r("LeftSideHeader"),u=r("Add"),d=r("List");return l(),c("section",$e,[h(m,{crumbs:n.breadcrumbs},null,8,["crumbs"]),e("div",Pe,[e("div",Ne,[h(a,{headerData:"Specialities"})])]),e("div",Re,[n.displayComponent?(l(),c("div",Be,[h(u,{specialityName:n.specialityName,id:n.specialityId,onChangePage:o.getData},null,8,["specialityName","id","onChangePage"])])):f("",!0),e("div",De,[e("div",Le,[e("div",Ae," Showing "+p(n.specialities.length)+" of "+p(n.totalRecords)+" Results ",1)])]),h(d,{specialities:n.specialities,totalCount:n.totalPages,onChangePage:o.getData,onGetRecord:o.getSpeciality},null,8,["specialities","totalCount","onChangePage","onGetRecord"])])])}const Ue=v(xe,[["render",Me]]);export{Ue as default};
