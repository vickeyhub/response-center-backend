import{_ as f,K as y,s as g,d as w,r as n,o as m,f as h,b as s,e as a,w as _,n as p,h as l,t as x,l as k}from"./app-1983373d.js";const C={name:"ChangePassword",components:{},data(){return{currentPassword:null,cPassword:null,newPassword:null,displayOldPassword:!1,displayNewPassword:!1,displayCPassword:!1,schema:{currentPassword:"required|min:8",newPassword:"required|min:8",cPassword:"required|min:8"},cPasswordErr:null}},methods:{submit(r,{resetForm:o}){if(this.cPasswordErr=null,this.newPassword!=this.cPassword)this.cPasswordErr="The confirm password field does not match.";else{const u={old_password:this.currentPassword,new_password:this.newPassword};y(u).then(async i=>{this.submittingForm=!1,this.handleResponse(i),i.success==!0&&(o(),await g.dispatch("auth/logout"),await this.$router.push({name:"auth.login"}))}).catch(i=>{this.submittingForm=!1,this.handleCatch(i)})}},handleResponse(r){w.useToast().open({message:r.message,type:r.success===!0?"success":"error",position:"top-right"})},handleCatch(r){w.useToast().open({message:r.response.data.message,type:"error",position:"top-right"})}}},V={class:"section-content bg-white col p-4"},N={style:{"--bs-breadcrumb-divider":"'/'"},"aria-label":"breadcrumb"},E={class:"breadcrumb"},O={class:"breadcrumb-item"},T=s("i",{class:"icon-home"},null,-1),B=s("li",{class:"breadcrumb-item active","aria-current":"page"}," Change Password ",-1),M=s("div",{class:"title-box"},[s("div",{class:"row gy-3"},[s("div",{class:"col"},[s("div",{class:"title"},[s("h1",null,"Change Password")])])])],-1),U={class:"content-wrap pt-4"},q={class:"form-box mb-3"},F={class:"row"},R={class:"col-12 col-lg-4"},S={class:"form-field"},A=s("label",{for:""},[l("Old Password"),s("sup",null,"*")],-1),z={class:"input-group"},D={class:"input-group-text"},K={class:"error invalid-feedback"},Y={class:"col-12 col-lg-4"},j={class:"form-field"},G=s("label",{for:""},[l("New Password"),s("sup",null,"*")],-1),H={class:"input-group"},I={class:"input-group-text"},J={class:"error invalid-feedback"},L={class:"col-12 col-lg-4"},Q={class:"form-field"},W=s("label",{for:""},[l("Confirm Password"),s("sup",null,"*")],-1),X={class:"input-group"},Z={class:"input-group-text"},$={class:"error invalid-feedback"},ss={class:"col-12"},es={class:"submit-wrap"},os={type:"submit",class:"btn btn-primary-light btn-medium min-small"},ts={key:0,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{margin:"0 10px"},width:"24px",height:"24px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},as=s("circle",{cx:"50",cy:"50",r:"32","stroke-width":"8",stroke:"#3A89C9","stroke-dasharray":"50.26548245743669 50.26548245743669",fill:"none","stroke-linecap":"round"},[s("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0 50 50;360 50 50"})],-1),rs=[as];function is(r,o,u,i,e,b){const v=n("router-link"),d=n("vee-field"),c=n("ErrorMessage"),P=n("vee-form");return m(),h("section",V,[s("nav",N,[s("ol",E,[s("li",O,[a(v,{to:"/dashboard"},{default:_(()=>[T]),_:1})]),B])]),M,s("div",U,[s("div",null,[s("div",q,[a(P,{"validation-schema":e.schema,onSubmit:b.submit},{default:_(()=>[s("div",F,[s("div",R,[s("div",S,[A,s("div",z,[s("div",D,[s("span",{onClick:o[0]||(o[0]=t=>e.displayOldPassword=!e.displayOldPassword)},[s("i",{class:p(["bi",e.displayOldPassword?"bi-eye-slash":"bi-eye"])},null,2)])]),a(d,{name:"currentPassword",type:e.displayOldPassword?"text":"password",modelValue:e.currentPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>e.currentPassword=t),class:"form-control",placeholder:"Enter current password"},null,8,["type","modelValue"])]),s("div",K,[a(c,{class:"error invalid-feedback",name:"currentPassword"})])])]),s("div",Y,[s("div",j,[G,s("div",H,[s("div",I,[s("span",{onClick:o[2]||(o[2]=t=>e.displayNewPassword=!e.displayNewPassword)},[s("i",{class:p(["bi",e.displayNewPassword?"bi-eye-slash":"bi-eye"])},null,2)])]),a(d,{name:"newPassword",type:e.displayNewPassword?"text":"password",modelValue:e.newPassword,"onUpdate:modelValue":o[3]||(o[3]=t=>e.newPassword=t),class:"form-control",placeholder:"Enter new password"},null,8,["type","modelValue"])]),s("div",J,[a(c,{class:"invalid-feedback",name:"newPassword"})])])]),s("div",L,[s("div",Q,[W,s("div",X,[s("div",Z,[s("span",{onClick:o[4]||(o[4]=t=>e.displayCPassword=!e.displayCPassword)},[s("i",{class:p(["bi",e.displayCPassword?"bi-eye-slash":"bi-eye"])},null,2)])]),a(d,{name:"cPassword",type:e.displayCPassword?"text":"password",modelValue:e.cPassword,"onUpdate:modelValue":o[5]||(o[5]=t=>e.cPassword=t),class:"form-control",placeholder:"Confirm password"},null,8,["type","modelValue"])]),s("div",$,[a(c,{class:"invalid-feedback",name:"cPassword"}),l(" "+x(e.cPasswordErr),1)])])]),s("div",ss,[s("div",es,[s("button",os,[r.submittingForm?(m(),h("svg",ts,rs)):k("",!0),l(" Update ")])])])])]),_:1},8,["validation-schema","onSubmit"])])])])])}const ns=f(C,[["render",is]]);export{ns as default};
