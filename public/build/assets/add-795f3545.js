import{C as S}from"./flatpickr-8c54c1e2.js";import{c as x}from"./news-f3cc6cf0.js";import{_ as V,r as n,o as u,f as _,e as l,w,b as e,x as M,t as h,l as y,n as N,y as B,z as E,h as m}from"./app-1983373d.js";/* empty css                                                         */import{B as U}from"./Breadcrumb-0722ea03.js";import{R as F}from"./RightSideButton-c34e14fb.js";import{L as T}from"./LeftSideHeader-ba42ca70.js";const A={data(){return{imageName:"",dragging:!1,image:null,formData:{title:null,image:null,description:"",date:"",categories:[],meta_title:null,meta_description:null,meta_keywords:null},config:{altInput:!0,altFormat:"j F, Y",dateFormat:"Y-m-d",disableMobile:!0},schema:{title:"required|min:3|max:300",categories:"required",date:"required"},descError:null}},components:{flatPickr:S},mounted(){this.getCategories("news")},methods:{addNews(a,{resetForm:t}){if(this.descError=null,this.formData.description=="")this.descError="This field is required.";else if(this.formData.description.length<50)this.descError="Minimum 50 characters are allowed.";else{let r=new FormData;r.append("image",this.file),r.append("title",this.formData.title),r.append("date",this.formData.date),r.append("categories",this.formData.categories),r.append("description",this.formData.description),r.append("meta_title",this.formData.meta_title),r.append("meta_description",this.formData.meta_description),r.append("meta_keywords",this.formData.meta_keywords),x(r).then(p=>{this.handleResponse(p),p.success==!0&&(this.file="",t(),this.$router.push({path:"/news/list"}))}).catch(p=>{this.handleCatch(p)})}},onChangeOfTitle(){this.formData.meta_title=this.formData.title,this.formData.meta_description=this.formData.title,this.formData.meta_keywords=this.formData.title},onChange(a){var t=a.target.files||a.dataTransfer.files;if(!t.length){this.dragging=!1;return}this.createFile(t[0])},createFile(a){if(!a.type.match("jpg.*")&&!a.type.match("jpeg.*")&&!a.type.match("png.*")){this.handleResponse({message:"Format accepted: jpg, jpeg, png",success:!1}),this.dragging=!1;return}if(a.size>5e6){this.handleResponse({message:"please check file size no over 5 MB.",success:!1}),this.dragging=!1;return}this.imageName=a.name,this.file=a,this.dragging=!1},removeFile(){this.file=""}}},i=a=>(B("data-v-6e7832e2"),a=a(),E(),a),I={class:"form-box"},j={class:"row"},R=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"Basic Details")],-1)),q={class:"col-md-12"},H={class:"form-field"},z=i(()=>e("label",{for:""},[m("Title"),e("sup",null,"*")],-1)),L={class:"error invalid-feedback"},Z={class:"col-md-6"},O={class:"form-field"},P=i(()=>e("label",{for:""},[m("Categories"),e("sup",null,"*")],-1)),K={key:0,class:"error invalid-feedback"},Y={class:"col-md-6"},G={class:"form-field"},J=i(()=>e("label",{for:""},[m("Date"),e("sup",null,"*")],-1)),Q={key:0,class:"error invalid-feedback"},W={class:"col-12"},X={class:"form-field"},$=i(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},"Upload Image")]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),m(" Format accepted: jpg, jpeg, png ")])])],-1)),ee={class:"uploader position-relative"},te={class:"uploader-info"},oe=i(()=>e("i",{class:"icon-upload"},null,-1)),se=i(()=>e("p",{class:"dropZone-title"},[m(" Drag & drop or "),e("strong",null,"browse"),m(" your file. ")],-1)),ae={key:0},le={class:"col-12"},ie={class:"form-field"},re=i(()=>e("label",{for:""},[m("Description"),e("sup",null,"*")],-1)),ne={class:"error invalid-feedback"},de={class:"row"},ce=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"SEO Fields")],-1)),me={class:"col-md-4"},pe={class:"form-field"},fe=i(()=>e("label",{for:""},"Meta Title",-1)),ue={class:"col-md-4"},_e={class:"form-field"},he=i(()=>e("label",{for:""},"Meta Description",-1)),ge={class:"col-md-4"},ve={class:"form-field"},De=i(()=>e("label",{for:""},"Meta Keywords",-1)),be=i(()=>e("div",{class:"submit-wrap pt-3"},[e("button",{type:"submit",class:"btn btn-secondary"},"SUBMIT")],-1));function we(a,t,r,p,o,c){const d=n("vee-field"),g=n("ErrorMessage"),v=n("Multiselect"),D=n("flat-pickr"),k=n("ckeditor"),C=n("vee-form");return u(),_("div",I,[l(C,{"validation-schema":o.schema,onSubmit:c.addNews,enctype:"multipart/form-data"},{default:w(()=>[e("div",j,[R,e("div",q,[e("div",H,[z,l(d,{name:"title",onInput:t[0]||(t[0]=s=>c.onChangeOfTitle()),type:"text",modelValue:o.formData.title,"onUpdate:modelValue":t[1]||(t[1]=s=>o.formData.title=s),class:"form-control",placeholder:"Enter Title"},null,8,["modelValue"]),e("div",L,[l(g,{class:"invalid-feedback",name:"title"})])])]),e("div",Z,[e("div",O,[P,l(d,{class:"form-control",name:"categories",type:"text",modelValue:o.formData.categories,"onUpdate:modelValue":t[3]||(t[3]=s=>o.formData.categories=s)},{default:w(({field:s,errors:f})=>[l(v,M({modelValue:o.formData.categories,"onUpdate:modelValue":t[2]||(t[2]=b=>o.formData.categories=b),mode:"tags"},s,{"close-on-select":!1,searchable:!0,"create-option":!1,valueProp:"id",label:"name",required:!0,options:a.categories,placeholder:"Select Categories"}),null,16,["modelValue","options"]),f[0]?(u(),_("div",K,h(f[0]),1)):y("",!0)]),_:1},8,["modelValue"])])]),e("div",Y,[e("div",G,[J,l(d,{class:"form-control",name:"date",type:"text",modelValue:o.formData.date,"onUpdate:modelValue":t[5]||(t[5]=s=>o.formData.date=s)},{default:w(({field:s,errors:f})=>[l(D,{modelValue:o.formData.date,"onUpdate:modelValue":t[4]||(t[4]=b=>o.formData.date=b),config:o.config,placeholder:"Select date"},null,8,["modelValue","config"]),f[0]?(u(),_("div",Q,h(f[0]),1)):y("",!0)]),_:1},8,["modelValue"])])]),e("div",W,[e("div",X,[$,e("div",ee,[e("div",te,[e("div",{class:N(["dropZone",o.dragging?"dropZone-over":""]),onDragenter:t[8]||(t[8]=s=>o.dragging=!0),onDragleave:t[9]||(t[9]=s=>o.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:t[6]||(t[6]=(...s)=>c.onChange&&c.onChange(...s))},[oe,se,o.imageName?(u(),_("small",ae,h(o.imageName),1)):y("",!0)],32),e("input",{type:"file",onChange:t[7]||(t[7]=(...s)=>c.onChange&&c.onChange(...s))},null,32)],34)])])])]),e("div",le,[e("div",ie,[re,l(k,{editor:a.editor,modelValue:o.formData.description,"onUpdate:modelValue":t[10]||(t[10]=s=>o.formData.description=s),config:a.editorConfig},null,8,["editor","modelValue","config"]),e("div",ne,h(o.descError),1)])])]),e("div",de,[ce,e("div",me,[e("div",pe,[fe,l(d,{name:"meta_title",type:"text",modelValue:o.formData.meta_title,"onUpdate:modelValue":t[11]||(t[11]=s=>o.formData.meta_title=s),class:"form-control",placeholder:"Enter Meta Title"},null,8,["modelValue"])])]),e("div",ue,[e("div",_e,[he,l(d,{name:"meta_description",type:"text",modelValue:o.formData.meta_description,"onUpdate:modelValue":t[12]||(t[12]=s=>o.formData.meta_description=s),class:"form-control",placeholder:"Enter Meta Description"},null,8,["modelValue"])])]),e("div",ge,[e("div",ve,[De,l(d,{name:"meta_keywords",type:"text",modelValue:o.formData.meta_keywords,"onUpdate:modelValue":t[13]||(t[13]=s=>o.formData.meta_keywords=s),class:"form-control",placeholder:"Enter Meta Keywords"},null,8,["modelValue"])])])]),be]),_:1},8,["validation-schema","onSubmit"])])}const ye=V(A,[["render",we],["__scopeId","data-v-6e7832e2"]]),Ve={name:"AddNews",components:{Add:ye,Breadcrumb:U,RightSideButton:F,LeftSideHeader:T},data(){return{btnData:{title:"All News",url:"/news/list"},breadcrumbs:[{class:null,url:"/news/list",name:"News"},{class:"active",url:"",name:"Add"}]}}},ke={class:"section-content bg-white col p-4"},Ce={class:"title-box"},Se={class:"row gy-3"},xe={class:"content-wrap pt-4"};function Me(a,t,r,p,o,c){const d=n("Breadcrumb"),g=n("LeftSideHeader"),v=n("RightSideButton"),D=n("Add",!0);return u(),_("section",ke,[l(d,{crumbs:o.breadcrumbs},null,8,["crumbs"]),e("div",Ce,[e("div",Se,[l(g,{headerData:"Add News"}),l(v,{btnData:o.btnData},null,8,["btnData"])])]),e("div",xe,[l(D)])])}const Ie=V(Ve,[["render",Me]]);export{Ie as default};
