import{_ as y,r as n,o as m,f as p,l as h,b as e,e as l,w as D,x as k,t as f,n as E,F as x,y as C,z as S,h as c}from"./app-1983373d.js";import{b as I,e as M}from"./blog-54eb6a53.js";/* empty css                                                         */import{B as N}from"./Breadcrumb-0722ea03.js";import{R as T}from"./RightSideButton-c34e14fb.js";import{L as U}from"./LeftSideHeader-ba42ca70.js";const F={props:{},components:{},data(){return{displayOverlay:!0,imageName:"",dragging:!1,image:null,blogData:{title:null,image:null,sub_title:null,description:"",meta_title:null,meta_description:null,meta_keywords:null},tempBlogData:{},schema:{title:"required|min:3|max:300",author_name:"required|min:3|max:50|regex:^([^0-9]*)$",categories:"required"},descError:null}},async mounted(){await this.getCategories("blog"),await this.getBlog();let o=this;new Promise(function(t,b){setTimeout(()=>{o.blogData=o.tempBlogData,o.displayOverlay=!1,t()},2500)})},methods:{async getBlog(){const o=`${this.$route.params.blogId}`;I(o).then(t=>{t.success===!0&&(this.tempBlogData=t.data,this.imageName=this.tempBlogData.image?this.tempBlogData.image.slice(this.tempBlogData.image.indexOf("uploads/")+8):null)})},updateBlog(){if(this.descError=null,this.blogData.description=="")this.descError="This field is required.";else if(this.blogData.description.length<50)this.descError="Minimum 50 characters are allowed.";else{let o=new FormData;o.append("image",this.file),o.append("title",this.blogData.title),o.append("description",this.blogData.description),o.append("author_name",this.blogData.author_name),o.append("categories",this.blogData.categoryIds),o.append("meta_title",this.blogData.meta_title),o.append("meta_description",this.blogData.meta_description),o.append("meta_keywords",this.blogData.meta_keywords),M(o,this.blogData.id).then(t=>{this.handleResponse(t),t.success==!0&&this.$router.push({path:"/blogs/list"})}).catch(t=>{this.handleCatch(t)})}},onChangeOfTitle(){this.blogData.meta_title=this.blogData.title,this.blogData.meta_description=this.blogData.title,this.blogData.meta_keywords=this.blogData.title},onChange(o){var t=o.target.files||o.dataTransfer.files;if(!t.length){this.dragging=!1;return}this.createFile(t[0])},createFile(o){if(!o.type.match("jpg.*")&&!o.type.match("jpeg.*")&&!o.type.match("png.*")){this.handleResponse({message:"Format accepted: jpg, jpeg, png",success:!1}),this.dragging=!1;return}if(o.size>5e6){this.handleResponse({message:"please check file size no over 5 MB.",success:!1}),this.dragging=!1;return}this.imageName=o.name,this.file=o,this.dragging=!1}}},i=o=>(C("data-v-af3f0996"),o=o(),S(),o),j={key:0,class:"overlay"},O=i(()=>e("div",{class:"overlay__inner"},[e("div",{class:"overlay__content"},[e("span",{class:"spinner"})])],-1)),R=[O],q={class:"form-box"},H={class:"row"},z=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"Basic Details")],-1)),L={class:"col-md-12"},Z={class:"form-field"},A=i(()=>e("label",{for:""},[c("Title"),e("sup",null,"*")],-1)),P={class:"error invalid-feedback"},K={class:"col-md-6"},G={class:"form-field"},J=i(()=>e("label",{for:""},[c("Author's Name"),e("sup",null,"*")],-1)),Q={class:"error invalid-feedback"},W={class:"col-md-6"},X={class:"form-field"},Y=i(()=>e("label",{for:""},[c("Categories"),e("sup",null,"*")],-1)),$={key:0,class:"error invalid-feedback"},ee={class:"col-12"},te={class:"form-field"},oe=i(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},"Upload Image")]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),c(" Format accepted: jpg, jpeg, png ")])])],-1)),se={class:"uploader position-relative"},ae={class:"uploader-info"},le=i(()=>e("i",{class:"icon-upload"},null,-1)),ie=i(()=>e("p",{class:"dropZone-title"},[c(" Drag & drop or "),e("strong",null,"browse"),c(" your file. ")],-1)),ne={key:0},re={class:"col-12"},de={class:"form-field"},ce=i(()=>e("label",{for:""},[c("Description"),e("sup",null,"*")],-1)),me={class:"error invalid-feedback"},pe={class:"row"},ge=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"SEO Fields")],-1)),ue={class:"col-md-4"},_e={class:"form-field"},he=i(()=>e("label",{for:""},"Meta Title",-1)),fe={class:"col-md-4"},be={class:"form-field"},ve=i(()=>e("label",{for:""},"Meta Description",-1)),De={class:"col-md-4"},ye={class:"form-field"},Ve=i(()=>e("label",{for:""},"Meta Keywords",-1)),Be=i(()=>e("div",{class:"submit-wrap pt-3"},[e("button",{type:"submit",class:"btn btn-secondary"},"SUBMIT")],-1));function we(o,t,b,V,s,d){const r=n("vee-field"),g=n("ErrorMessage"),u=n("Multiselect"),_=n("ckeditor"),B=n("vee-form");return m(),p(x,null,[s.displayOverlay?(m(),p("div",j,R)):h("",!0),e("div",q,[l(B,{"validation-schema":s.schema,onSubmit:d.updateBlog,enctype:"multipart/form-data"},{default:D(()=>[e("div",H,[z,e("div",L,[e("div",Z,[A,l(r,{name:"title",type:"text",modelValue:s.blogData.title,"onUpdate:modelValue":t[0]||(t[0]=a=>s.blogData.title=a),onInput:t[1]||(t[1]=a=>d.onChangeOfTitle()),class:"form-control",placeholder:"Enter Title"},null,8,["modelValue"]),e("div",P,[l(g,{class:"invalid-feedback",name:"title"})])])]),e("div",K,[e("div",G,[J,l(r,{name:"author_name",type:"text",modelValue:s.blogData.author_name,"onUpdate:modelValue":t[2]||(t[2]=a=>s.blogData.author_name=a),class:"form-control",placeholder:"Enter Author's Name"},null,8,["modelValue"]),e("div",Q,[l(g,{class:"invalid-feedback",name:"author_name"})])])]),e("div",W,[e("div",X,[Y,l(r,{class:"form-control",name:"categories",type:"text",modelValue:s.blogData.categoryIds,"onUpdate:modelValue":t[4]||(t[4]=a=>s.blogData.categoryIds=a)},{default:D(({field:a,errors:v})=>[l(u,k({modelValue:s.blogData.categoryIds,"onUpdate:modelValue":t[3]||(t[3]=w=>s.blogData.categoryIds=w),mode:"tags"},a,{"close-on-select":!1,searchable:!0,"create-option":!1,valueProp:"id",label:"name",required:!0,options:o.categories,placeholder:"Select Categories"}),null,16,["modelValue","options"]),v[0]?(m(),p("div",$,f(v[0]),1)):h("",!0)]),_:1},8,["modelValue"])])]),e("div",ee,[e("div",te,[oe,e("div",se,[e("div",ae,[e("div",{class:E(["dropZone",s.dragging?"dropZone-over":""]),onDragenter:t[7]||(t[7]=a=>s.dragging=!0),onDragleave:t[8]||(t[8]=a=>s.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:t[5]||(t[5]=(...a)=>d.onChange&&d.onChange(...a))},[le,ie,s.imageName?(m(),p("small",ne,f(s.imageName),1)):h("",!0)],32),e("input",{type:"file",onChange:t[6]||(t[6]=(...a)=>d.onChange&&d.onChange(...a))},null,32)],34)])])])]),e("div",re,[e("div",de,[ce,l(_,{editor:o.editor,modelValue:s.blogData.description,"onUpdate:modelValue":t[9]||(t[9]=a=>s.blogData.description=a),config:o.editorConfig},null,8,["editor","modelValue","config"]),e("div",me,f(s.descError),1)])])]),e("div",pe,[ge,e("div",ue,[e("div",_e,[he,l(r,{name:"meta_title",type:"text",modelValue:s.blogData.meta_title,"onUpdate:modelValue":t[10]||(t[10]=a=>s.blogData.meta_title=a),class:"form-control",placeholder:"Enter Meta Title"},null,8,["modelValue"])])]),e("div",fe,[e("div",be,[ve,l(r,{name:"meta_description",type:"text",modelValue:s.blogData.meta_description,"onUpdate:modelValue":t[11]||(t[11]=a=>s.blogData.meta_description=a),class:"form-control",placeholder:"Enter Meta Description"},null,8,["modelValue"])])]),e("div",De,[e("div",ye,[Ve,l(r,{name:"meta_keywords",type:"text",modelValue:s.blogData.meta_keywords,"onUpdate:modelValue":t[12]||(t[12]=a=>s.blogData.meta_keywords=a),class:"form-control",placeholder:"Enter Meta Keywords"},null,8,["modelValue"])])])]),Be]),_:1},8,["validation-schema","onSubmit"])])],64)}const ke=y(F,[["render",we],["__scopeId","data-v-af3f0996"]]),Ee={name:"EditBlog",components:{Edit:ke,Breadcrumb:N,RightSideButton:T,LeftSideHeader:U},data(){return{btnData:{title:"All Blogs",url:"/blogs/list"},breadcrumbs:[{class:null,url:"/blogs/list",name:"Blogs"},{class:"active",url:"",name:"Edit"}]}}},xe={class:"section-content bg-white col p-4"},Ce={class:"title-box"},Se={class:"row gy-3"},Ie={class:"content-wrap pt-4"};function Me(o,t,b,V,s,d){const r=n("Breadcrumb"),g=n("LeftSideHeader"),u=n("RightSideButton"),_=n("Edit",!0);return m(),p("section",xe,[l(r,{crumbs:s.breadcrumbs},null,8,["crumbs"]),e("div",Ce,[e("div",Se,[l(g,{headerData:"Edit Blog"}),l(u,{btnData:s.btnData},null,8,["btnData"])])]),e("div",Ie,[l(_)])])}const Re=y(Ee,[["render",Me]]);export{Re as default};
