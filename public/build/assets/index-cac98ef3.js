import{f as $,c as y,u as S,d as w}from"./states-1f820086.js";import{q as x,_ as g,r as c,o as n,f as d,e as l,w as v,b as t,t as m,l as C,d as k,F as p,j as b,n as M,h as P}from"./app-1983373d.js";import{L}from"./LeftSideHeader-ba42ca70.js";function R(e,s){return x({url:`/api/states-covered/${s}`,method:"put",data:e})}const I={name:"AddStatesCovered",props:{stateId:{type:Number,default:0},id:{type:Number,default:0}},data(){return{showMsg:!1,msg:null,msgType:"success",states:[],state_id:this.stateId>0?this.stateId:null,schema:{state_id:"required|regex:^([^0-9]*)$"}}},mounted(){this.getStates()},methods:{getStates(e=0){$("?skip="+e).then(s=>{this.states=s.data})},submit(){this.id>0?this.update():this.add()},add(){y({state_id:this.state_id}).then(e=>{this.displayMsg(e.message,!0,e.success==!0?"success":"error"),setTimeout(()=>{this.displayMsg("","success",!1),this.state_id=""},1e3),this.$emit("changePage",0)}).catch(e=>{var s;(s=e.response)!=null&&s.data&&this.displayMsg(e.response.data.message,!0,"error")})},update(){R({state_id:this.state_id},this.id).then(e=>{this.state_id=null,this.displayMsg(e.message,!0,e.success==!0?"success":"error"),setTimeout(()=>{this.displayMsg("","success",!1)},1e3),this.$emit("changePage",0)}).catch(e=>{var s;(s=e.response)!=null&&s.data&&this.displayMsg(response.message,!0,"error")})},displayMsg(e,s,a){this.msg=e,this.showMsg=a,this.msgType=s}}},N={class:"form-box mb-3"},V={class:"row"},T={class:"col col-xl-6"},D={class:"form-field"},A={key:0},E={class:"col-sm-auto"},B={class:"submit-wrap"},H={type:"submit",class:"btn btn-primary-light btn-medium min-small"};function j(e,s,a,r,o,_){const u=c("vee-field"),i=c("ErrorMessage"),h=c("vee-form");return n(),d("div",N,[l(h,{"validation-schema":o.schema,onSubmit:_.submit},{default:v(()=>[t("div",V,[t("div",T,[t("div",D,[l(u,{name:"state_id",modelValue:o.state_id,"onUpdate:modelValue":s[0]||(s[0]=f=>o.state_id=f),class:"form-control"},null,8,["modelValue"]),l(i,{class:"text-red-600",name:"state_id"}),o.showMsg?(n(),d("p",A,m(o.msg),1)):C("",!0)])]),t("div",E,[t("div",B,[t("button",H,m(a.id==0?"Add":"Update"),1)])])])]),_:1},8,["validation-schema","onSubmit"])])}const q=g(I,[["render",j]]),F={props:{statesCovered:Array,totalCount:Number},data(){return{}},methods:{changePage(e){this.$emit("changePage",(e-1)*10)},updateStatus(e,s){e.status=s,S(e,e.id).then(()=>{this.$emit("changePage",0)}).catch(a=>{var r;(r=a.response)!=null&&r.data&&console.log(response.message)})},deleteState(e,s){w(e).then(a=>{k.useToast().open({message:a.message,type:"error",position:"top-right"}),this.statesCovered.splice(s,1)}).catch(a=>{console.log(a)})}}},G={class:"table-responsive"},U={class:"table align-middle"},z=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",{width:"150",class:"text-center"},"Status")])],-1),J={class:"text-center"},K=["onClick"],O={class:"row gy-4 align-items-center"},Q=t("div",{class:"col-auto"},null,-1),W={class:"col-auto ms-auto"},X={class:"row align-items-center justify-content-end"},Y=t("div",{class:"col-auto"},"Page",-1),Z={class:"col ps-0"},tt={class:"pagination-wrap"},et={class:"pagination flex-wrap pagination-sm mb-0"},st={class:"page-item"};function at(e,s,a,r,o,_){const u=c("btn");return n(),d(p,null,[t("div",G,[t("table",U,[z,t("tbody",null,[(n(!0),d(p,null,b(a.statesCovered,(i,h)=>(n(),d("tr",{key:h},[t("td",null,m(i.name),1),t("td",J,[t("span",{class:M(["d-inline-block",i.status==1?"status active":"status"]),onClick:f=>_.updateStatus(i,i.status===1?0:1)},null,10,K)])]))),128))])])]),t("div",O,[Q,t("div",W,[t("div",X,[Y,t("div",Z,[t("nav",tt,[t("ul",et,[(n(!0),d(p,null,b(a.totalCount,i=>(n(),d("div",null,[t("li",st,[l(u,{onClick:h=>_.changePage(i),class:"page-link",href:"#"},{default:v(()=>[P(m(i),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const ot=g(F,[["render",at]]),it={name:"Specialities",components:{Add:q,List:ot,LeftSideHeader:L},data(){return{statesCovered:[],totalPages:1,totalRecords:0,stateId:"",stateCoveredId:0,displayComponent:!0}},created(){this.getData()},methods:{getData(e=0){this.stateId="",this.stateCoveredId=0,this.listLoading=!0,$("?skip="+e).then(s=>{this.totalRecords=s.data.totalRecords,this.totalPages=s.data.totalRecords>10?Math.ceil(s.data.totalRecords/10):1,this.statesCovered=s.data.data})}}},nt={class:"section-content bg-white col p-4"},dt={style:{"--bs-breadcrumb-divider":"'/'"},"aria-label":"breadcrumb"},ct={class:"breadcrumb"},lt={class:"breadcrumb-item"},rt=t("i",{class:"icon-home"},null,-1),_t=t("li",{class:"breadcrumb-item"},[t("a",{href:"#"},"Masters")],-1),ht=t("li",{class:"breadcrumb-item active","aria-current":"page"}," States Covered ",-1),ut={class:"title-box"},mt={class:"row gy-3"},pt={class:"content-wrap pt-4"},gt={key:0},vt={class:"row mb-3 align-items-center"},ft={class:"col"},bt={class:"data-info"};function $t(e,s,a,r,o,_){const u=c("router-link"),i=c("LeftSideHeader"),h=c("List");return n(),d("section",nt,[t("nav",dt,[t("ol",ct,[t("li",lt,[l(u,{to:"/dashboard"},{default:v(()=>[rt]),_:1})]),_t,ht])]),t("div",ut,[t("div",mt,[l(i,{headerData:"States Covered"})])]),t("div",pt,[o.displayComponent?(n(),d("div",gt)):C("",!0),t("div",vt,[t("div",ft,[t("div",bt,m(o.totalRecords)+" Results",1)])]),l(h,{statesCovered:o.statesCovered,totalCount:o.totalPages,onChangePage:_.getData,onGetRecord:e.get},null,8,["statesCovered","totalCount","onChangePage","onGetRecord"])])])}const wt=g(it,[["render",$t]]);export{wt as default};
