import{C}from"./flatpickr-8c54c1e2.js";import{b as x,e as S}from"./news-f3cc6cf0.js";import{_ as b,r as l,o as m,f as p,l as _,b as e,e as n,w as D,x as N,t as f,n as I,F as M,y as B,z as F,h as c}from"./app-1983373d.js";/* empty css                                                         */import{B as T}from"./Breadcrumb-0722ea03.js";import{R as U}from"./RightSideButton-c34e14fb.js";import{L as j}from"./LeftSideHeader-ba42ca70.js";const O={components:{flatPickr:C},data(){return{displayOverlay:!0,imageName:"",dragging:!1,image:null,newsData:{title:null,image:null,sub_title:null,date:"",description:"",meta_title:null,meta_description:null,meta_keywords:null},config:{altInput:!0,altFormat:"j F, Y",dateFormat:"Y-m-d",disableMobile:!0},tempnewsData:{},schema:{title:"required|min:3|max:300",categories:"required"},descError:null}},async mounted(){await this.getCategories("news"),await this.getnews();let s=this;new Promise(function(t,y){setTimeout(()=>{s.newsData=s.tempnewsData,s.displayOverlay=!1,t()},2500)})},methods:{async getnews(){const s=`${this.$route.params.newsId}`;x(s).then(t=>{t.success===!0&&(this.tempnewsData=t.data,this.imageName=this.tempnewsData.image?this.tempnewsData.image.slice(this.tempnewsData.image.indexOf("uploads/")+8):null)})},updateNews(){if(this.descError=null,this.newsData.description=="")this.descError="This field is required.";else if(this.newsData.description.length<50)this.descError="Minimum 50 characters are allowed.";else{let s=new FormData;s.append("image",this.file),s.append("title",this.newsData.title),s.append("description",this.newsData.description),s.append("categories",this.newsData.categoryIds),s.append("date",this.newsData.date),s.append("meta_title",this.newsData.meta_title),s.append("meta_description",this.newsData.meta_description),s.append("meta_keywords",this.newsData.meta_keywords),S(s,this.newsData.id).then(t=>{this.handleResponse(t),t.success==!0&&this.$router.push({path:"/news/list"})}).catch(t=>{this.handleCatch(t)})}},onChangeOfTitle(){this.newsData.meta_title=this.newsData.title,this.newsData.meta_description=this.newsData.title,this.newsData.meta_keywords=this.newsData.title},onChange(s){var t=s.target.files||s.dataTransfer.files;if(!t.length){this.dragging=!1;return}this.createFile(t[0])},createFile(s){if(!s.type.match("jpg.*")&&!s.type.match("jpeg.*")&&!s.type.match("png.*")){this.handleResponse({message:"Format accepted: jpg, jpeg, png",success:!1}),this.dragging=!1;return}if(s.size>5e6){this.handleResponse({message:"please check file size no over 5 MB.",success:!1}),this.dragging=!1;return}this.imageName=s.name,this.file=s,this.dragging=!1}}},i=s=>(B("data-v-3f96c2f6"),s=s(),F(),s),R={key:0,class:"overlay"},H=i(()=>e("div",{class:"overlay__inner"},[e("div",{class:"overlay__content"},[e("span",{class:"spinner"})])],-1)),q=[H],z={class:"form-box"},L={class:"row"},P=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"Basic Details")],-1)),Z={class:"col-md-12"},K={class:"form-field"},Y=i(()=>e("label",{for:""},[c("Title"),e("sup",null,"*")],-1)),A={class:"error invalid-feedback"},G={class:"col-md-6"},J={class:"form-field"},Q=i(()=>e("label",{for:""},[c("Categories"),e("sup",null,"*")],-1)),W={key:0,class:"error invalid-feedback"},X={class:"col-md-6"},$={class:"form-field"},ee=i(()=>e("label",{for:""},[c("Date"),e("sup",null,"*")],-1)),te={key:0,class:"error invalid-feedback"},se={class:"col-12"},oe={class:"form-field"},ae=i(()=>e("div",{class:"row"},[e("div",{class:"col"},[e("label",{for:""},"Upload Image")]),e("div",{class:"col-sm-auto"},[e("div",{class:"form-field-info"},[e("i",{class:"icon-bulb text-secondary"}),c(" Format accepted: jpg, jpeg, png ")])])],-1)),ne={class:"uploader position-relative"},ie={class:"uploader-info"},le=i(()=>e("i",{class:"icon-upload"},null,-1)),de=i(()=>e("p",{class:"dropZone-title"},[c(" Drag & drop or "),e("strong",null,"browse"),c(" your file. ")],-1)),re={key:0},ce={class:"col-12"},me={class:"form-field"},pe=i(()=>e("label",{for:""},[c("Description"),e("sup",null,"*")],-1)),ue={class:"error invalid-feedback"},_e={class:"row"},fe=i(()=>e("div",{class:"col-md-12"},[e("h4",{class:"subHeading"},"SEO Fields")],-1)),he={class:"col-md-4"},ge={class:"form-field"},we=i(()=>e("label",{for:""},"Meta Title",-1)),ve={class:"col-md-4"},De={class:"form-field"},ye=i(()=>e("label",{for:""},"Meta Description",-1)),be={class:"col-md-4"},Ve={class:"form-field"},ke=i(()=>e("label",{for:""},"Meta Keywords",-1)),Ee=i(()=>e("div",{class:"submit-wrap pt-3"},[e("button",{type:"submit",class:"btn btn-secondary"},"SUBMIT")],-1));function Ce(s,t,y,V,o,r){const d=l("vee-field"),h=l("ErrorMessage"),g=l("Multiselect"),w=l("flat-pickr"),k=l("ckeditor"),E=l("vee-form");return m(),p(M,null,[o.displayOverlay?(m(),p("div",R,q)):_("",!0),e("div",z,[n(E,{"validation-schema":o.schema,onSubmit:r.updateNews,enctype:"multipart/form-data"},{default:D(()=>[e("div",L,[P,e("div",Z,[e("div",K,[Y,n(d,{name:"title",type:"text",onInput:t[0]||(t[0]=a=>r.onChangeOfTitle()),modelValue:o.newsData.title,"onUpdate:modelValue":t[1]||(t[1]=a=>o.newsData.title=a),class:"form-control",placeholder:"Enter Title"},null,8,["modelValue"]),e("div",A,[n(h,{class:"invalid-feedback",name:"title"})])])]),e("div",G,[e("div",J,[Q,n(d,{class:"form-control",name:"categories",type:"text",modelValue:o.newsData.categoryIds,"onUpdate:modelValue":t[3]||(t[3]=a=>o.newsData.categoryIds=a)},{default:D(({field:a,errors:u})=>[n(g,N({modelValue:o.newsData.categoryIds,"onUpdate:modelValue":t[2]||(t[2]=v=>o.newsData.categoryIds=v),mode:"tags"},a,{"close-on-select":!1,searchable:!0,"create-option":!1,valueProp:"id",label:"name",required:!0,options:s.categories,placeholder:"Select Categories"}),null,16,["modelValue","options"]),u[0]?(m(),p("div",W,f(u[0]),1)):_("",!0)]),_:1},8,["modelValue"])])]),e("div",X,[e("div",$,[ee,n(d,{class:"form-control",name:"date",type:"text",modelValue:o.newsData.date,"onUpdate:modelValue":t[5]||(t[5]=a=>o.newsData.date=a)},{default:D(({field:a,errors:u})=>[n(w,{modelValue:o.newsData.date,"onUpdate:modelValue":t[4]||(t[4]=v=>o.newsData.date=v),config:o.config,placeholder:"Select date"},null,8,["modelValue","config"]),u[0]?(m(),p("div",te,f(u[0]),1)):_("",!0)]),_:1},8,["modelValue"])])]),e("div",se,[e("div",oe,[ae,e("div",ne,[e("div",ie,[e("div",{class:I(["dropZone",o.dragging?"dropZone-over":""]),onDragenter:t[8]||(t[8]=a=>o.dragging=!0),onDragleave:t[9]||(t[9]=a=>o.dragging=!1)},[e("div",{class:"dropZone-info",onDrag:t[6]||(t[6]=(...a)=>r.onChange&&r.onChange(...a))},[le,de,o.imageName?(m(),p("small",re,f(o.imageName),1)):_("",!0)],32),e("input",{type:"file",onChange:t[7]||(t[7]=(...a)=>r.onChange&&r.onChange(...a))},null,32)],34)])])])]),e("div",ce,[e("div",me,[pe,n(k,{editor:s.editor,modelValue:o.newsData.description,"onUpdate:modelValue":t[10]||(t[10]=a=>o.newsData.description=a),config:s.editorConfig},null,8,["editor","modelValue","config"]),e("div",ue,f(o.descError),1)])])]),e("div",_e,[fe,e("div",he,[e("div",ge,[we,n(d,{name:"meta_title",type:"text",modelValue:o.newsData.meta_title,"onUpdate:modelValue":t[11]||(t[11]=a=>o.newsData.meta_title=a),class:"form-control",placeholder:"Enter Meta Title"},null,8,["modelValue"])])]),e("div",ve,[e("div",De,[ye,n(d,{name:"meta_description",type:"text",modelValue:o.newsData.meta_description,"onUpdate:modelValue":t[12]||(t[12]=a=>o.newsData.meta_description=a),class:"form-control",placeholder:"Enter Meta Description"},null,8,["modelValue"])])]),e("div",be,[e("div",Ve,[ke,n(d,{name:"meta_keywords",type:"text",modelValue:o.newsData.meta_keywords,"onUpdate:modelValue":t[13]||(t[13]=a=>o.newsData.meta_keywords=a),class:"form-control",placeholder:"Enter Meta Keywords"},null,8,["modelValue"])])])]),Ee]),_:1},8,["validation-schema","onSubmit"])])],64)}const xe=b(O,[["render",Ce],["__scopeId","data-v-3f96c2f6"]]),Se={name:"EditNews",components:{Edit:xe,Breadcrumb:T,RightSideButton:U,LeftSideHeader:j},data(){return{btnData:{title:"All News",url:"/news/list"},breadcrumbs:[{class:null,url:"/news/list",name:"News"},{class:"active",url:"",name:"Edit"}]}}},Ne={class:"section-content bg-white col p-4"},Ie={class:"title-box"},Me={class:"row gy-3"},Be={class:"content-wrap pt-4"};function Fe(s,t,y,V,o,r){const d=l("Breadcrumb"),h=l("LeftSideHeader"),g=l("RightSideButton"),w=l("Edit",!0);return m(),p("section",Ne,[n(d,{crumbs:o.breadcrumbs},null,8,["crumbs"]),e("div",Ie,[e("div",Me,[n(h,{headerData:"Edit News"}),n(g,{btnData:o.btnData},null,8,["btnData"])])]),e("div",Be,[n(w)])])}const ze=b(Se,[["render",Fe]]);export{ze as default};
