import{u as x,c as C,d as A,a as k,f as w,b as y}from"./ageRange-50b9506c.js";import{_ as v,r as m,o as c,f as d,e as r,w as R,b as e,t as _,F as f,j as p,k as $,v as P,n as S,h as b,l as D}from"./app-1983373d.js";import{B}from"./Breadcrumb-0722ea03.js";import{L}from"./LeftSideHeader-ba42ca70.js";const V={name:"AgeRangeAdd",props:{minAge:{type:String,default:null},maxAge:{type:String,default:null},id:{type:Number,default:0}},data(){return{min_age:this.minAge,max_age:this.maxAge,schema:{min_age:"required|numeric|min_value:0|max_value:200",max_age:"required|numeric|min_value:1|max_value:200"}}},methods:{submit(s,{resetForm:t}){this.id>0?x({min_age:this.min_age,max_age:this.max_age},this.id).then(n=>{this.handleResponse(n),n.success==!0&&(t(),this.$emit("changePage",0))}).catch(n=>{this.handleCatch(n)}):C({min_age:this.min_age,max_age:this.max_age}).then(n=>{this.handleResponse(n),n.success==!0&&(t(),this.$emit("changePage",0))}).catch(n=>{this.handleCatch(n)})}}},M={class:"form-box mb-3"},E={class:"row"},N={class:"col col-xl-3"},I={class:"form-field"},U={class:"error invalid-feedback"},H={class:"col col-xl-3"},T={class:"form-field"},j={class:"error invalid-feedback"},q={class:"col-sm-auto"},F={class:"submit-wrap"},G={type:"submit",class:"btn btn-primary-light btn-medium min-small"};function z(s,t,n,g,a,i){const u=m("vee-field"),o=m("ErrorMessage"),h=m("vee-form");return c(),d("div",M,[r(h,{"validation-schema":a.schema,onSubmit:i.submit,ref:"ageForm"},{default:R(()=>[e("div",E,[e("div",N,[e("div",I,[r(u,{type:"number",modelValue:a.min_age,"onUpdate:modelValue":t[0]||(t[0]=l=>a.min_age=l),class:"form-control",placeholder:"Enter Minimum Age",name:"min_age",min:"0"},null,8,["modelValue"]),e("div",U,[r(o,{class:"invalid-feedback",name:"min_age"})])])]),e("div",H,[e("div",T,[r(u,{name:"max_age",type:"number",modelValue:a.max_age,"onUpdate:modelValue":t[1]||(t[1]=l=>a.max_age=l),class:"form-control",placeholder:"Enter Maximum Age"},null,8,["modelValue"]),e("div",j,[r(o,{class:"invalid-feedback",name:"max_age"})])])]),e("div",q,[e("div",F,[e("button",G,_(n.id==0?"Add":"Update"),1)])])])]),_:1},8,["validation-schema","onSubmit"])])}const J=v(V,[["render",z]]),K={props:{ageRanges:Array,totalCount:Number},data(){return{selectedRange:[]}},methods:{changePage(s){this.$emit("changePage",(s-1)*10)},editRecord(s){this.$emit("getRecord",s)},deleteRecord(s){this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(t=>{t.isConfirmed&&A(s).then(()=>{this.$emit("changePage",0)})})},deleteData(){const s=this.selectedRange;this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(t=>{t.isConfirmed&&k({"age-ranges":s}).then(()=>{this.$emit("changePage",0),this.selectedRange=[]})})},updateStatus(s,t){s.status=t,x(s,s.id).then(()=>{this.$emit("changePage",0)}).catch(n=>{var g;(g=n.response)!=null&&g.data&&console.log(response.message)})}}},O={class:"table-responsive"},Q={class:"table align-middle"},W=e("thead",null,[e("tr",null,[e("th",{width:"45px"}),e("th",null,"Age Ranges"),e("th",{width:"250"},"Status"),e("th",{width:"150"},"Action")])],-1),X={key:0},Y=["value"],Z=["onClick"],ee={class:"actions"},te=["onClick"],se=e("i",{class:"icon-edit"},null,-1),ae=["onClick"],ne=e("i",{class:"icon-delete"},null,-1),oe={key:1},ie=e("tr",null,[e("td",{colspan:"4",class:"text-center"},"No record found")],-1),le=[ie],ce={class:"row gy-4 align-items-center"},de={class:"col-auto"},re=["disabled"],me={class:"col-auto ms-auto"},ue={class:"row align-items-center justify-content-end"},_e=e("div",{class:"col-auto"},"Page",-1),ge={class:"col ps-0"},he={class:"pagination-wrap"},fe={class:"pagination flex-wrap pagination-sm mb-0"},be={class:"page-item"};function ve(s,t,n,g,a,i){const u=m("btn");return c(),d(f,null,[e("div",O,[e("table",Q,[W,n.ageRanges.length?(c(),d("tbody",X,[(c(!0),d(f,null,p(n.ageRanges,(o,h)=>(c(),d("tr",null,[e("td",null,[$(e("input",{class:"form-check-input",value:o.id,"onUpdate:modelValue":t[0]||(t[0]=l=>a.selectedRange=l),type:"checkbox"},null,8,Y),[[P,a.selectedRange]])]),e("td",null,_(o.min_age)+" to "+_(o.max_age),1),e("td",null,[e("span",{onClick:l=>i.updateStatus(o,o.status===1?0:1),class:S(o.status==1?"status active":"status")},null,10,Z)]),e("td",null,[e("ul",ee,[e("li",null,[e("button",{class:"btn btn-link",onClick:l=>i.editRecord(o.id)},[se,b("Edit ")],8,te)]),e("li",null,[e("button",{class:"btn",onClick:l=>i.deleteRecord(o.id)},[ne,b("Delete ")],8,ae)])])])]))),256))])):(c(),d("tbody",oe,le))])]),e("div",ce,[e("div",de,[e("button",{class:"btn btn-danger py-2",onClick:t[1]||(t[1]=(...o)=>i.deleteData&&i.deleteData(...o)),disabled:!a.selectedRange.length}," Delete Selected ",8,re)]),e("div",me,[e("div",ue,[_e,e("div",ge,[e("nav",he,[e("ul",fe,[(c(!0),d(f,null,p(n.totalCount,o=>(c(),d("div",null,[e("li",be,[r(u,{onClick:h=>i.changePage(o),class:"page-link",href:"#"},{default:R(()=>[b(_(o),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const pe=v(K,[["render",ve]]),xe={name:"AgeRangeList",components:{Add:J,List:pe,Breadcrumb:B,LeftSideHeader:L},data(){return{ageRanges:[],totalPages:1,totalRecords:0,minAge:null,maxAge:null,rangeId:0,displayComponent:!0,breadcrumbs:[{class:null,url:"#",name:"Masters"},{class:"active",url:"",name:"Age Ranges"}]}},created(){this.getData()},methods:{getData(s=0){this.minAge=null,this.maxAge=null,this.rangeId=0,this.listLoading=!0,w("?skip="+s).then(t=>{this.totalRecords=t.data.totalRecords,this.totalPages=t.data.totalRecords>10?Math.ceil(t.data.totalRecords/10):1,this.ageRanges=t.data.data})},get(s){this.displayComponent=!1,y(s).then(t=>{this.displayComponent=!0,t.success===!0&&(this.minAge=t.data.min_age,this.maxAge=t.data.max_age,this.rangeId=t.data.id)})}}},Re={class:"section-content bg-white col p-4"},Ce={class:"title-box"},Ae={class:"row gy-3"},ke={class:"content-wrap pt-4"},we={key:0},ye={class:"row mb-3 align-items-center"},$e={class:"col"},Pe={class:"data-info"};function Se(s,t,n,g,a,i){const u=m("Breadcrumb"),o=m("LeftSideHeader"),h=m("Add"),l=m("List");return c(),d("section",Re,[r(u,{crumbs:a.breadcrumbs},null,8,["crumbs"]),e("div",Ce,[e("div",Ae,[r(o,{headerData:"Age Ranges"})])]),e("div",ke,[a.displayComponent?(c(),d("div",we,[r(h,{minAge:a.minAge,maxAge:a.maxAge,id:a.rangeId,onChangePage:i.getData},null,8,["minAge","maxAge","id","onChangePage"])])):D("",!0),e("div",ye,[e("div",$e,[e("div",Pe," Showing "+_(a.ageRanges.length)+" of "+_(a.totalRecords)+" Results ",1)])]),r(l,{ageRanges:a.ageRanges,totalCount:a.totalPages,onChangePage:i.getData,onGetRecord:i.get},null,8,["ageRanges","totalCount","onChangePage","onGetRecord"])])])}const Me=v(xe,[["render",Se]]);export{Me as default};
