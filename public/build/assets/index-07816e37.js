import{d as k,a as x,u as R,f as D,b as B}from"./news-f3cc6cf0.js";import{n as v}from"./no-img-df4ddc69.js";import{_ as C,r,o as l,f as i,b as t,F as f,j as w,k as y,v as S,t as h,n as A,h as p,e as u,w as N,u as L}from"./app-1983373d.js";import{B as P}from"./Breadcrumb-0722ea03.js";import{R as $}from"./RightSideButton-c34e14fb.js";import{L as I}from"./LeftSideHeader-ba42ca70.js";const T={props:{news:Array,totalCount:Number},data(){return{selectedNews:[],noImg:v}},methods:{noImage(s){s.target.src=v},changePage(s){this.$emit("changePage",(s-1)*10)},editRecord(s){this.$emit("getRecord",s)},deleteRecord(s){this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(e=>{e.isConfirmed&&k(s).then(()=>{this.$emit("changePage",0)})})},deleteData(){const s=this.selectedNews;this.$swal({title:"Are you sure ?",showCancelButton:!0,icon:"",confirmButtonText:"Continue"}).then(e=>{e.isConfirmed&&x({news_ids:s}).then(()=>{this.$emit("changePage",0),this.selectedNews=[]})})},updateStatus(s,e){s.status=e,R(s,s.id).then(()=>{this.$emit("changePage",0)}).catch(d=>{var _;(_=d.response)!=null&&_.data&&console.log(response.message)})}}},V={class:"table-responsive"},E={class:"table align-middle"},M=t("thead",null,[t("tr",null,[t("th",{width:"45px"}),t("th",null,"Title"),t("th",null,"Date"),t("th",null,"Status"),t("th",{width:"150"},"Action")])],-1),Q={key:0},H=["value"],j={class:"row flex-nowrap align-items-center"},F={class:"col-auto"},G={class:"user-img"},U=["src"],z=["src"],q={class:"col"},J={class:"user-info"},K={class:"row flex-nowrap align-items-center"},O=["onClick"],W={class:"actions"},X=["onClick"],Y=t("i",{class:"icon-edit"},null,-1),Z=["onClick"],tt=t("i",{class:"icon-delete"},null,-1),et={key:1},st=t("tr",null,[t("td",{colspan:"6",class:"text-center"},"No record found")],-1),ot=[st],nt={class:"row gy-4 align-items-center"},at={class:"col-auto"},lt=["disabled"],it={class:"col-auto ms-auto"},ct={class:"row align-items-center justify-content-end"},dt=t("div",{class:"col-auto"},"Page",-1),rt={class:"col ps-0"},ut={class:"pagination-wrap"},ht={class:"pagination flex-wrap pagination-sm mb-0"},_t={class:"page-item"};function mt(s,e,d,_,n,a){const g=r("btn");return l(),i(f,null,[t("div",V,[t("table",E,[M,d.news.length?(l(),i("tbody",Q,[(l(!0),i(f,null,w(d.news,(o,m)=>(l(),i("tr",{key:m},[t("td",null,[y(t("input",{class:"form-check-input",value:o.id,"onUpdate:modelValue":e[0]||(e[0]=c=>n.selectedNews=c),type:"checkbox"},null,8,H),[[S,n.selectedNews]])]),t("td",null,[t("div",j,[t("div",F,[t("div",G,[o.image?(l(),i("img",{key:0,src:`${o.image}`,alt:"",onError:e[1]||(e[1]=(...c)=>a.noImage&&a.noImage(...c))},null,40,U)):(l(),i("img",{key:1,src:n.noImg},null,8,z))])]),t("div",q,[t("div",J,h(o.title),1)])])]),t("td",null,[t("div",K,h(s.formatDate(o.date)),1)]),t("td",null,[t("span",{onClick:c=>a.updateStatus(o,o.status===1?0:1),class:A(o.status==1?"status active":"status")},null,10,O)]),t("td",null,[t("ul",W,[t("li",null,[t("button",{class:"btn btn-link",onClick:c=>s.goToEdit(`/news/edit/${o.id}`,o.id)},[Y,p("Edit ")],8,X)]),t("li",null,[t("button",{class:"btn",onClick:c=>a.deleteRecord(o.id)},[tt,p("Delete ")],8,Z)])])])]))),128))])):(l(),i("tbody",et,ot))])]),t("div",nt,[t("div",at,[t("button",{class:"btn btn-danger py-2",onClick:e[2]||(e[2]=(...o)=>a.deleteData&&a.deleteData(...o)),disabled:!n.selectedNews.length}," Delete Selected ",8,lt)]),t("div",it,[t("div",ct,[dt,t("div",rt,[t("nav",ut,[t("ul",ht,[(l(!0),i(f,null,w(d.totalCount,o=>(l(),i("div",null,[t("li",_t,[u(g,{onClick:m=>a.changePage(o),class:"page-link",href:"#"},{default:N(()=>[p(h(o),1)]),_:2},1032,["onClick"])])]))),256))])])])])])])],64)}const gt=C(T,[["render",mt]]),ft={name:"AgeRangeList",components:{List:gt,Breadcrumb:P,RightSideButton:$,LeftSideHeader:I},data(){return{btnData:{title:"Add New",url:"/news/add"},news:[],searchQuery:"",totalPages:1,totalRecords:0,minAge:null,maxAge:null,rangeId:0,displayComponent:!0,breadcrumbs:[{class:null,url:"/news/list",name:"News"},{class:"active",url:"",name:"List"}]}},created(){this.getData()},methods:{getData(s=0){this.minAge=null,this.maxAge=null,this.rangeId=0,this.listLoading=!0,D(`?skip=${s}&search=${this.searchQuery}`).then(e=>{this.totalRecords=e.data.totalRecords,this.totalPages=e.data.totalRecords>10?Math.ceil(e.data.totalRecords/10):1,this.news=e.data.data})},get(s){this.displayComponent=!1,B(s).then(e=>{this.displayComponent=!0,e.success===!0&&(this.minAge=e.data.min_age,this.maxAge=e.data.max_age,this.rangeId=e.data.id)})}}},pt={class:"section-content bg-white col p-4"},bt={class:"title-box"},vt={class:"row gy-3"},wt={class:"content-wrap pt-4"},Ct={class:"row mb-3 g-3 flex-sm-row-reverse align-items-center"},yt={class:"col-sm-auto"},kt={class:"data-search"},xt={class:"col"},Rt={class:"data-info"};function Dt(s,e,d,_,n,a){const g=r("Breadcrumb"),o=r("LeftSideHeader"),m=r("RightSideButton"),c=r("List");return l(),i("section",pt,[u(g,{crumbs:n.breadcrumbs},null,8,["crumbs"]),t("div",bt,[t("div",vt,[u(o,{headerData:"All News"}),u(m,{btnData:n.btnData},null,8,["btnData"])])]),t("div",wt,[t("div",Ct,[t("div",yt,[t("div",kt,[y(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=b=>n.searchQuery=b),onInput:e[1]||(e[1]=b=>a.getData()),class:"form-control form-control-sm",placeholder:"Search by Title"},null,544),[[L,n.searchQuery]])])]),t("div",xt,[t("div",Rt," Showing "+h(n.news.length)+" of "+h(n.totalRecords)+" Results ",1)])]),u(c,{news:n.news,totalCount:n.totalPages,onChangePage:a.getData,onGetRecord:a.get},null,8,["news","totalCount","onChangePage","onGetRecord"])])])}const $t=C(ft,[["render",Dt]]);export{$t as default};
